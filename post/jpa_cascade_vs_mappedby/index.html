<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.24.4"/><meta data-react-helmet="true" name="description" content="JPA cascade, mappedBy, orphanRemoval을 알아보자"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><style data-href="/styles.93606c9c1f52c7126858.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}

/*
! tailwindcss v3.2.2 | MIT License | https://tailwindcss.com
*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-feature-settings:normal;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.right-0{right:0}.top-0{top:0}.right-6{right:1.5rem}.bottom-10{bottom:2.5rem}.top-40{top:10rem}.z-10{z-index:10}.z-30{z-index:30}.z-40{z-index:40}.order-first{order:-9999}.float-right{float:right}.mx-auto{margin-left:auto;margin-right:auto}.my-5{margin-bottom:1.25rem;margin-top:1.25rem}.my-8{margin-bottom:2rem;margin-top:2rem}.mb-2{margin-bottom:.5rem}.mt-4{margin-top:1rem}.mt-2{margin-top:.5rem}.mt-20{margin-top:5rem}.mt-8{margin-top:2rem}.ml-3{margin-left:.75rem}.mr-2{margin-right:.5rem}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.h-48{height:12rem}.h-4{height:1rem}.h-screen{height:100vh}.h-6{height:1.5rem}.h-3\/4{height:75%}.w-48{width:12rem}.w-4{width:1rem}.w-full{width:100%}.w-6{width:1.5rem}.w-56{width:14rem}.max-w-none{max-width:none}.flex-none{flex:none}.flex-1{flex:1 1 0%}.origin-top-right{transform-origin:top right}.translate-x-0{--tw-translate-x:0px}.translate-x-0,.translate-x-full{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-full{--tw-translate-x:100%}.scale-95{--tw-scale-x:.95;--tw-scale-y:.95}.scale-100,.scale-95{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-100{--tw-scale-x:1;--tw-scale-y:1}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}.resize{resize:both}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.place-content-center{place-content:center}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-4{gap:1rem}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(.5rem*var(--tw-space-y-reverse));margin-top:calc(.5rem*(1 - var(--tw-space-y-reverse)))}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.75rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.75rem*var(--tw-space-x-reverse))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse:0;border-bottom-width:calc(1px*var(--tw-divide-y-reverse));border-top-width:calc(1px*(1 - var(--tw-divide-y-reverse)))}.divide-gray-200>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgb(229 231 235/var(--tw-divide-opacity))}.divide-slate-400>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgb(148 163 184/var(--tw-divide-opacity))}.overflow-hidden{overflow:hidden}.rounded-full{border-radius:9999px}.rounded{border-radius:.25rem}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.border{border-width:1px}.border-2{border-width:2px}.border-l-2{border-left-width:2px}.border-r-2{border-right-width:2px}.border-b-2{border-bottom-width:2px}.border-l-4{border-left-width:4px}.border-dashed{border-style:dashed}.border-gray-100{--tw-border-opacity:1;border-color:rgb(243 244 246/var(--tw-border-opacity))}.border-gray-300{--tw-border-opacity:1;border-color:rgb(209 213 219/var(--tw-border-opacity))}.bg-amber-100{--tw-bg-opacity:1;background-color:rgb(254 243 199/var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246/var(--tw-bg-opacity))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251/var(--tw-bg-opacity))}.bg-red-500{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.bg-yellow-50{--tw-bg-opacity:1;background-color:rgb(254 252 232/var(--tw-bg-opacity))}.bg-opacity-30{--tw-bg-opacity:0.3}.p-2{padding:.5rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-5{padding:1.25rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-2\.5{padding-bottom:.625rem;padding-top:.625rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.py-1{padding-bottom:.25rem;padding-top:.25rem}.py-4{padding-bottom:1rem;padding-top:1rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.pt-6{padding-top:1.5rem}.pb-8{padding-bottom:2rem}.pt-8{padding-top:2rem}.pt-4{padding-top:1rem}.pb-2{padding-bottom:.5rem}.pl-3{padding-left:.75rem}.pr-4{padding-right:1rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-2xl{font-size:1.5rem;line-height:2rem}.text-xs{font-size:.75rem;line-height:1rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.font-extrabold{font-weight:800}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.leading-9{line-height:2.25rem}.leading-8{line-height:2rem}.leading-tight{line-height:1.25}.tracking-tight{letter-spacing:-.025em}.tracking-wide{letter-spacing:.025em}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81/var(--tw-text-opacity))}.underline{text-decoration-line:underline}.opacity-0{opacity:0}.opacity-100{opacity:1}.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.shadow-lg,.shadow-md{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.ring-1{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.ring-black{--tw-ring-opacity:1;--tw-ring-color:rgb(0 0 0/var(--tw-ring-opacity))}.ring-opacity-5{--tw-ring-opacity:0.05}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-150,.transition{transition-duration:.15s}.duration-100{transition-duration:.1s}.duration-75{transition-duration:75ms}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}.ease-in{transition-timing-function:cubic-bezier(.4,0,1,1)}.first\:pt-0:first-child{padding-top:0}.last\:pb-0:last-child{padding-bottom:0}.hover\:bg-gray-100:hover{--tw-bg-opacity:1;background-color:rgb(243 244 246/var(--tw-bg-opacity))}.hover\:underline:hover{text-decoration-line:underline}.hover\:shadow-lg:hover{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.focus\:border-blue-500:focus{--tw-border-opacity:1;border-color:rgb(59 130 246/var(--tw-border-opacity))}.focus\:shadow-lg:focus{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-0:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color)}.focus\:ring-0:focus,.focus\:ring-2:focus{box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.focus\:ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color)}.focus\:ring-gray-200:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(229 231 235/var(--tw-ring-opacity))}.focus\:ring-blue-500:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(59 130 246/var(--tw-ring-opacity))}.active\:shadow-lg:active{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.dark .dark\:h-80{height:20rem}.dark .dark\:divide-gray-700>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgb(55 65 81/var(--tw-divide-opacity))}.dark .dark\:border-gray-700{--tw-border-opacity:1;border-color:rgb(55 65 81/var(--tw-border-opacity))}.dark .dark\:border-gray-600{--tw-border-opacity:1;border-color:rgb(75 85 99/var(--tw-border-opacity))}.dark .dark\:bg-gray-800{--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity))}.dark .dark\:bg-gray-700{--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity))}.dark .dark\:bg-slate-900{--tw-bg-opacity:1;background-color:rgb(15 23 42/var(--tw-bg-opacity))}.dark .dark\:bg-gray-600{--tw-bg-opacity:1;background-color:rgb(75 85 99/var(--tw-bg-opacity))}.dark .dark\:text-gray-100{--tw-text-opacity:1;color:rgb(243 244 246/var(--tw-text-opacity))}.dark .dark\:text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity))}.dark .dark\:text-gray-200{--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.dark .dark\:text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.dark .dark\:placeholder-gray-400::-moz-placeholder{--tw-placeholder-opacity:1;color:rgb(156 163 175/var(--tw-placeholder-opacity))}.dark .dark\:placeholder-gray-400::placeholder{--tw-placeholder-opacity:1;color:rgb(156 163 175/var(--tw-placeholder-opacity))}.dark .dark\:hover\:bg-gray-700:hover{--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity))}.dark .dark\:hover\:text-white:hover{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.dark .dark\:focus\:border-blue-500:focus{--tw-border-opacity:1;border-color:rgb(59 130 246/var(--tw-border-opacity))}.dark .dark\:focus\:ring-gray-600:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(75 85 99/var(--tw-ring-opacity))}.dark .dark\:focus\:ring-blue-500:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(59 130 246/var(--tw-ring-opacity))}@media (min-width:640px){.sm\:flex-row{flex-direction:row}.sm\:px-4{padding-left:1rem;padding-right:1rem}.sm\:text-4xl{font-size:2.25rem}.sm\:leading-10,.sm\:text-4xl{line-height:2.5rem}}@media (min-width:768px){.md\:order-2{order:2}.md\:order-1{order:1}.md\:mt-0{margin-top:0}.md\:flex{display:flex}.md\:hidden{display:none}.md\:w-auto{width:auto}.md\:w-32{width:8rem}.md\:flex-row{flex-direction:row}.md\:space-y-5>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(1.25rem*var(--tw-space-y-reverse));margin-top:calc(1.25rem*(1 - var(--tw-space-y-reverse)))}.md\:space-x-8>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(2rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(2rem*var(--tw-space-x-reverse))}.md\:border-0{border-width:0}.md\:p-0{padding:0}.md\:text-6xl{font-size:3.75rem;line-height:1}.md\:text-sm{font-size:.875rem;line-height:1.25rem}.md\:font-medium{font-weight:500}.md\:hover\:bg-transparent:hover{background-color:transparent}.md\:hover\:text-blue-700:hover{--tw-text-opacity:1;color:rgb(29 78 216/var(--tw-text-opacity))}.dark .md\:dark\:hover\:bg-transparent:hover{background-color:transparent}.dark .md\:dark\:hover\:text-white:hover{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}}@media (min-width:1280px){.xl\:col-span-2{grid-column:span 2/span 2}.xl\:grid{display:grid}.xl\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.xl\:gap-x-8{-moz-column-gap:2rem;column-gap:2rem}.xl\:space-y-0>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(0px*var(--tw-space-y-reverse));margin-top:calc(0px*(1 - var(--tw-space-y-reverse)))}}.toc-content .toc{box-sizing:border-box;font-size:90%;height:100%;line-height:1.5;overflow:auto;padding:20px 10px 30px 25px}.toc-content .toc ul{font-weight:700;list-style-image:none;list-style-position:outside;list-style-type:circle;margin:0;overflow:visible;padding-bottom:5px;padding-left:16px}.toc-content .toc ul li a:hover{color:#1ac5be}.toc-content .toc ul li a.selected{color:#1ac5be;font-weight:600;text-decoration:underline}</style><title data-react-helmet="true">JPA Cascade와 mappedBy의 혼동?(feat. orphanRemoval)</title><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .anchor-header.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor-header.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor-header svg,
    h2 .anchor-header svg,
    h3 .anchor-header svg,
    h4 .anchor-header svg,
    h5 .anchor-header svg,
    h6 .anchor-header svg {
      visibility: hidden;
    }
    h1:hover .anchor-header svg,
    h2:hover .anchor-header svg,
    h3:hover .anchor-header svg,
    h4:hover .anchor-header svg,
    h5:hover .anchor-header svg,
    h6:hover .anchor-header svg,
    h1 .anchor-header:focus svg,
    h2 .anchor-header:focus svg,
    h3 .anchor-header:focus svg,
    h4 .anchor-header:focus svg,
    h5 .anchor-header:focus svg,
    h6 .anchor-header:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://hanumoka.github.io/post/jpa_cascade_vs_mappedby/" data-baseprotocol="https:" data-basehost="hanumoka.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="icon" href="/favicon-32x32.png?v=bcc288a3db95bbace5ec9312668798cd" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=bcc288a3db95bbace5ec9312668798cd"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=bcc288a3db95bbace5ec9312668798cd"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=bcc288a3db95bbace5ec9312668798cd"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=bcc288a3db95bbace5ec9312668798cd"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=bcc288a3db95bbace5ec9312668798cd"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=bcc288a3db95bbace5ec9312668798cd"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=bcc288a3db95bbace5ec9312668798cd"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=bcc288a3db95bbace5ec9312668798cd"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main class="sc-bcXHqe BYAAq light"><div class="text-gray-900 dark:text-gray-200 bg-amber-100 dark:bg-gray-700 bg-opacity-30"><header class="sticky top-0 z-30 border-dashed border-2"><div class="text-gray-900 dark:text-gray-200 bg-amber-100 dark:bg-gray-800"><style data-emotion="css 5rvvqk">.css-5rvvqk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;width:768px;height:120px;margin:0 auto;}@media (max-width: 768px){.css-5rvvqk{width:100%;height:80px;padding:0 20px;}}</style><div class="css-5rvvqk e1ke0ojz2"><div class="flex w-full gap-4"><div class="flex-none"><style data-emotion="css 1lie8a0">.css-1lie8a0{width:80px;height:80px;border-radius:50%;}@media (max-width: 768px){.css-1lie8a0{width:60px;height:60px;}}</style><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained css-1lie8a0 e1n1u3tj0"><div style="max-width:120px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;120&#x27; width=&#x27;120&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEwUlEQVR42iWU+VdTVxSF8//WtookefOYkDAFApIwi1QsFmvrUF2tWEUExICCWOZBoECRIUbmQPL1BH+467313rn77rP32TdQNFyKmiNLnrpHXne4MDxZPnnTgVodbugUkjrFRo3ziEFBt6RW9qhSZ7nkHfmmeRTNCIGibCyYJueewbnjcBIzBEzALZ9jy2GxxmBPwGgQ0AabfLUpmw3yrnF58Lk8izXyX4CLZlQAdWHimZxJ4ZlrcRqTDbrLjqYzkkrxtLeXtToDhF2J5XnS4NQSMNO6rDt3bBarLTaFTKnDwHmptYTNea0wFGYXQjuv2YwkGhke/4fBOz2c1iuQsmSZkJYVk3fTFkCb04jJ4M0W/vzpLltygAA6nCVUAVU5K2lme2yEQwzef8Ly0g4v7/YxV60wHdWYdMO898NM6ArrinmpX7HK5k1HkoHRMQY9aflIBN3+1Wfvrs1+vKSly5qi8OL+AxbmV3nQ1c2zcBnLmslWSOe/sMVC2GAoqPD6epiVSotXt2/xcWaNgXQ7gZ0Kne3lFDvj1fIzxIZhc2zrDLeleNTezZwYULRdYR6VNp1vy4mDH2VVDrmjqgy/HGFqco6/mtIEjm2HvQ6TXK/Da0vh7x9CFBIO770gmTKFibJycnIIVuTbcmPMX1dYFnZ4ERZDGv19D5icXeRFLE4g77gciIsTwjSj2GSklf06jzElyKHrMnjlOlnLYlfV2QlZ5K0YmWthPpSrwjwio2LxxPX5vb2ZnYSYciQmDOsmc6rNSpnOqKawUW/wIaxw5nns6QbL5Qr9wSgZt4HBkMtc0GRfpMAomegzEQozVlPOmkxCYE80mQiqnIjlG2UmY5rKRp3FjBhQdEQ3x2NF2CzEOjhu/o1XkqhDT+ZV2BdKUsiYfRJC89XCukojkBNXR4XNgcTvP3EvY5Sz2a0x7gRlgw96RP5Z8r2SMaueibQMfU81gz8G2Rb2uBFGy8J8ShiMxRTRsNJhxNVYVV2OJJuvK8MU5+J8uGewpZbaElBXaq5e448rKtO2xZChMSAyrKqKMPXpd1UJgsZQVYhAKVJLcdHN8SW/Lm8l0297pPWnHv03oqxLnHCj7ArLoSthllSLL6rJgq6zJLI8F+DZ51X0denc6fIJFFI6qwmdqbAqG2XyRbPS8C4ZMrC+zeOgzsdyg5yYV3quWDb/St3Q9yqdV8up+9nn3qMqOkcraZyXpBy2aOQEdCAeYkoitSUGXMhVdKGKg2LUoeR7Qxw9EfPGvwvT1e3QMh2jU26e1labznwd9eMeiWmbtjMBLDRoHLWq5N5EmOm3mXpWxXC3z3CDxWSjw2TCY1buv0xDlFty2ySlpr0YI7UeI/k+Qjrn0/rVpy1bQcu+zOFZUuXgocbpO4PDmQiF01aya5XkJj0ONxLsbd3msSSgeSxGy2Et9R8raNuNkf7ikd6Lkt6N0JGr4Ma2TXxJTMn2hjgdNzgaF+DFOBcHbZxMy809LqLPJHk4mqTxF5/UrEfL1wr6ss30bCepXlGJLV2jbl2jPVdF02eHhk2HwGlG4vTO5HBSbutsE4WvrZxt1fF5ppabIzXUbwszYdC2X3HZVnpHWt305HuE1H6EpqwvrUpNNkprNsb/ZxydAgphY08AAAAASUVORK5CYII=" alt=""/><picture><source type="image/webp" data-srcset="/static/cd37422f29d09835455749f78f9ac0db/2b147/profile-image.webp 30w,/static/cd37422f29d09835455749f78f9ac0db/caa3b/profile-image.webp 60w,/static/cd37422f29d09835455749f78f9ac0db/b15f9/profile-image.webp 120w,/static/cd37422f29d09835455749f78f9ac0db/b5014/profile-image.webp 240w" sizes="(min-width: 120px) 120px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 120px) 120px, 100vw" decoding="async" loading="lazy" data-src="/static/cd37422f29d09835455749f78f9ac0db/a0287/profile-image.png" data-srcset="/static/cd37422f29d09835455749f78f9ac0db/6ecb6/profile-image.png 30w,/static/cd37422f29d09835455749f78f9ac0db/43a9d/profile-image.png 60w,/static/cd37422f29d09835455749f78f9ac0db/a0287/profile-image.png 120w,/static/cd37422f29d09835455749f78f9ac0db/f5f72/profile-image.png 240w" alt="Profile Image"/></picture><noscript><picture><source type="image/webp" srcSet="/static/cd37422f29d09835455749f78f9ac0db/2b147/profile-image.webp 30w,/static/cd37422f29d09835455749f78f9ac0db/caa3b/profile-image.webp 60w,/static/cd37422f29d09835455749f78f9ac0db/b15f9/profile-image.webp 120w,/static/cd37422f29d09835455749f78f9ac0db/b5014/profile-image.webp 240w" sizes="(min-width: 120px) 120px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 120px) 120px, 100vw" decoding="async" loading="lazy" src="/static/cd37422f29d09835455749f78f9ac0db/a0287/profile-image.png" srcSet="/static/cd37422f29d09835455749f78f9ac0db/6ecb6/profile-image.png 30w,/static/cd37422f29d09835455749f78f9ac0db/43a9d/profile-image.png 60w,/static/cd37422f29d09835455749f78f9ac0db/a0287/profile-image.png 120w,/static/cd37422f29d09835455749f78f9ac0db/f5f72/profile-image.png 240w" alt="Profile Image"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><div class="flex-1 w-74"><style data-emotion="css 1h8u8jj">.css-1h8u8jj{font-size:20px;font-weight:400;}@media (max-width: 768px){.css-1h8u8jj{font-size:15px;}}</style><div class="css-1h8u8jj e1ke0ojz1">Loading...</div><style data-emotion="css 1mgdphf">.css-1mgdphf{margin-top:5px;font-size:35px;font-weight:700;}@media (max-width: 768px){.css-1mgdphf{font-size:25px;}}</style><div class="css-1mgdphf e1ke0ojz0"><a class="text-xl block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700" href="/">Hanumoka Dev Blog</a></div></div><div class="flex-2 w-22"><nav class="px-2 sm:px-4 py-2.5 rounded"><div class="container flex flex-wrap items-center justify-between mx-auto"><div class="flex md:order-2"><button data-collapse-toggle="navbar-search" type="button" class="inline-flex items-center p-2 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-search" aria-expanded="false"><span class="sr-only">Open menu</span><svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button></div><div class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1"><ul class="flex flex-col p-4 mt-4 border border-gray-100 rounded-lg md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium md:border-0 dark:border-gray-700"><li><a class="text-xl block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700" href="/">Home</a></li><li><a class="text-xl block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700" href="/search">Search</a></li><li><a class="text-xl block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 md:dark:hover:text-white dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700" href="/about">About</a></li></ul></div></div></nav></div></div></div></div></header><main class="relative w-full border-dashed border-l-2 border-r-2 border-b-2"><div class="flex-1 flex flex-col sm:flex-row"><main class="flex-1 gray-500"><style data-emotion="css 1vaccb6">.css-1vaccb6{position:relative;width:100%;height:400px;}@media (max-width: 768px){.css-1vaccb6{height:320px;}}</style><div class="css-1vaccb6 e1opi4mu1"><div class="dark:bg-slate-900 dark:h-80"><style data-emotion="css 1k50qem">.css-1k50qem{z-index:-1;width:100%;height:320px;object-fit:cover;-webkit-filter:brightness(0.7);filter:brightness(0.7);}@media (max-width: 768px){.css-1k50qem{height:320px;}}</style><div data-gatsby-image-wrapper="" style="position:absolute" class="gatsby-image-wrapper gatsby-image-wrapper-constrained css-1k50qem e1opi4mu0"><div style="max-width:376px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;270&#x27; width=&#x27;376&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADNElEQVR42lVTaU9TURR8P0WjMe5+IEYTtxg1ahSNkSgKoqAouCFEcEuICiJqFBFcogilIJTSQo2taNhcqBVKXCEgApWtUEr3jc2M555aoh8m7777zp0358xcyePx4ufQd/RbemB32tA73IlecyesdgtGbcMwW/vR1tdC6xEMWfsYdscYPz+bmtA1+A095g54PT64XC5Ifu841MaHyG9IhUyfhYrmeyj/mIOipmuQ67Nh6HqNB40XaO8OHr9LR5nhNp5/eoo3HRrk1Cah1HATT2jf4/YGCd0uN6t436llJcNjAxgYNdHaiBefZRiw9OLXSBcp72B0m9thGv6B5p+1GKQ6i83M7w6nHW63G5Jg9VLbQqnfG4AYgZDv8/h5L/gt8A/Gucbj9hCBh0lEjdPlIDgFofPv4cB/zwAdFD8T30Nw8tOFCf8UJv2/MeGbJkzR+zSmAuCzkjjY3m/E/cY05DWcRW59CkPZkscEQkGQ2MVrBxmn/1EDzacCKFpyUd6cA1XrA9R8e4buofagwsvaKEQUzkJCxSqcrdqGAyWLESmbh7o2JSmZJhIHQp2ImcaXrUSUfAHXCcSULqXzs1H8IRuS7qucNpeww4X6DDKiiNeXdVFIVm/m6IiZihn5vH6OV1LlJiSpNhI2MZLVW3C0fCU5fgvSCeU6XH8dD+0XGbJexaH2ewWu1cSivk2F/cULuCUxJ+GiIB4c/YWLmgjqZDvSqncgtToc56p34rRyI1QUPylavghykppPMzxduQEllKvYZ2FoaFcjsWINj8DutKK1tRWWkVEMjfUhUbEacWVhOFK+HIcJ8YoVPAK54QakY4pVSH8RSTnU4RQR7iuej4L3V0hxMc+xsCmDHR+zWTm8QmFqVfhMq2IsKeqtSKCfCCOlSuN9Jnn09hLedWipZSVDzEgoFiaIOLAp3qApaVU7uWXRbqjlk8r1UDTnQhJ39rxmF/YUzcFx5VouOFi6DHtlc+mKFXDeZlxmU7oRVxqG6JKFbKaAqN9NKRHdSOO+SbpGdch8GYtMMuOqLgYZLw+xYpvDyjcilEOxFnsigw/fXsTd+mTk1J1BXmMqivSZ+GL6gD+Y6HjWT5D4PQAAAABJRU5ErkJggg==" alt=""/><picture><source type="image/webp" data-srcset="/static/155d8d580e2cb84d24912d3c8b249738/c4d8c/main.webp 94w,/static/155d8d580e2cb84d24912d3c8b249738/12296/main.webp 188w,/static/155d8d580e2cb84d24912d3c8b249738/186c3/main.webp 376w" sizes="(min-width: 376px) 376px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 376px) 376px, 100vw" decoding="async" loading="lazy" data-src="/static/155d8d580e2cb84d24912d3c8b249738/9102b/main.png" data-srcset="/static/155d8d580e2cb84d24912d3c8b249738/20abc/main.png 94w,/static/155d8d580e2cb84d24912d3c8b249738/a4d09/main.png 188w,/static/155d8d580e2cb84d24912d3c8b249738/9102b/main.png 376w" alt="thumbnail"/></picture><noscript><picture><source type="image/webp" srcSet="/static/155d8d580e2cb84d24912d3c8b249738/c4d8c/main.webp 94w,/static/155d8d580e2cb84d24912d3c8b249738/12296/main.webp 188w,/static/155d8d580e2cb84d24912d3c8b249738/186c3/main.webp 376w" sizes="(min-width: 376px) 376px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 376px) 376px, 100vw" decoding="async" loading="lazy" src="/static/155d8d580e2cb84d24912d3c8b249738/9102b/main.png" srcSet="/static/155d8d580e2cb84d24912d3c8b249738/20abc/main.png 94w,/static/155d8d580e2cb84d24912d3c8b249738/a4d09/main.png 188w,/static/155d8d580e2cb84d24912d3c8b249738/9102b/main.png 376w" alt="thumbnail"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><style data-emotion="css 1bu5eay">.css-1bu5eay{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;height:100%;margin:0 auto;padding:60px 0;}@media (max-width: 768px){.css-1bu5eay{width:100%;padding:40px 20px;}}</style><div class="css-1bu5eay e1st1jau4"><style data-emotion="css 1fkv5f9">.css-1fkv5f9{display:grid;place-items:center;width:40px;height:40px;border-radius:50%;font-size:22px;cursor:pointer;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);}@media (max-width: 768px){.css-1fkv5f9{width:30px;height:30px;font-size:18px;}}</style><div class="css-1fkv5f9 e1st1jau3"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-left" class="svg-inline--fa fa-arrow-left " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"></path></svg></div><div class="text-4xl font-extrabold my-5">JPA Cascade와 mappedBy의 혼동?(feat. orphanRemoval)</div><div class="my-5"><a href="/?category=JPA"><span class="font-semibold text-xl mr-2">#<!-- -->JPA<!-- --></span></a><a href="/?category=cascade"><span class="font-semibold text-xl mr-2">#<!-- -->cascade<!-- --></span></a><a href="/?category=mappedBy"><span class="font-semibold text-xl mr-2">#<!-- -->mappedBy<!-- --></span></a><a href="/?category=orphanRemoval"><span class="font-semibold text-xl mr-2">#<!-- -->orphanRemoval<!-- --></span></a></div><div>2023.05.06.</div></div></div></div><div><div class="fixed right-6 top-1px py-2 px-1 z-40 bottom-10"><button class="animate-pulse my-8 float-right px-5 py-2 bg-red-500 text-white text-sm font-bold tracking-wide rounded-full focus:outline-none">TOC</button><div class="rounded-md border-dashed border-2 dark:text-gray-200 text-gray-900 dark:bg-gray-600 bg-yellow-50 top-40 right-0 p-5 fixed h-3/4 z-40 ease-in-out duration-300 translate-x-full"><br/><div class="toc-container"><div class="toc-wrapper"><div class="toc-content"><aside class="border-l-4"><div class="toc"><ul>
<li>
<p><a href="#jpa-cascade%EC%99%80-mappedby%EC%9D%98-%ED%98%BC%EB%8F%99feat-orphanremoval">JPA Cascade와 mappedBy의 혼동?(feat. orphanRemoval)</a></p>
<ul>
<li>
<p><a href="#%EA%B0%9C%EC%9A%94">개요</a></p>
</li>
<li>
<p><a href="#jpa-cascade%EC%98%81%EC%86%8D%EC%84%B1%EC%A0%84%EC%9D%98%EB%9E%80">JPA Cascade(영속성전의)란</a></p>
<ul>
<li><a href="#jpa-cascade%EC%9D%98-%EC%A0%95%EC%9D%98">JPA Cascade의 정의</a></li>
<li><a href="#jpa-cascade-%EC%98%B5%EC%85%98-%EC%A2%85%EB%A5%98">JPA Cascade 옵션 종류</a></li>
<li><a href="#jpa-cascade-%EA%B0%84%EB%8B%A8%EC%98%88%EC%A0%9C">JPA Cascade 간단예제</a></li>
</ul>
</li>
<li>
<p><a href="#jpa-cacade-%EC%82%AC%EC%9A%A9%EC%8B%9C-%EC%9C%A0%EC%9D%98%EC%A0%90">JPA Cacade 사용시 유의점</a></p>
<ul>
<li><a href="#%EA%B3%A0%EC%95%84%EA%B0%9D%EC%B2%B4">고아객체</a></li>
<li><a href="#cascadeall--orphanremoval-true-%EC%9D%B8-%EA%B2%BD%EC%9A%B0-%EB%B6%80%EB%AA%A8%EC%97%94%ED%8B%B0%ED%8B%B0%EB%8A%94-%EC%9E%90%EC%8B%9D%EC%97%94%ED%8B%B0%ED%8B%B0%EC%9D%98-%EB%AA%A8%EB%93%A0-%EB%9D%BC%EC%9D%B4%ED%94%84%EC%82%AC%EC%9D%B4%ED%81%B4%EC%9D%84-%EA%B4%80%EB%A6%AC%ED%95%9C%EB%8B%A4">Cascade.ALL + orphanRemoval =true 인 경우 부모엔티티는 자식엔티티의 모든 라이프사이클을 관리한다.</a></li>
</ul>
</li>
<li>
<p><a href="#jpa-mappedby%EB%9E%80">JPA mappedBy란</a></p>
<ul>
<li><a href="#%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84%EC%A3%BC%EC%9D%B8%EC%9D%98-%EA%B6%8C%ED%95%9C--%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84%EB%A5%BC-%EC%84%A4%EC%A0%95%ED%95%A0%EC%88%98-%EC%9E%88%EB%8A%94-%EA%B6%8C%ED%95%9C%EC%9D%98-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EC%A3%BC%EC%9D%B8%EC%9D%B4-%EA%B0%96%EB%8A%94%EB%8B%A4">연관관계주인의 권한 : 연관관계를 설정할수 있는 권한의 연관관계 주인이 갖는다.</a></li>
</ul>
</li>
<li>
<p><a href="#%EB%82%9C-%EC%99%9C-cascade%EC%99%80-mappedby%EA%B0%80-%ED%98%BC%EB%8F%99%EB%90%98%EB%8A%94%EA%B0%80">난 왜 Cascade와 mappedBy가 혼동되는가</a></p>
</li>
<li>
<p><a href="#%EC%A0%95%EB%A6%AC">정리</a></p>
</li>
<li>
<p><a href="#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C">참고자료</a></p>
</li>
</ul>
</li>
</ul></div></aside></div></div></div></div></div></div><style data-emotion="css 19z3oce">.css-19z3oce{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:876px;margin:0 auto;padding:50px 0;word-break:break-all;line-height:1.8;font-size:16px;font-weight:400;}.css-19z3oce p{padding:3px 0;}.css-19z3oce h1,.css-19z3oce h2,.css-19z3oce h3{font-weight:800;margin-bottom:30px;}.css-19z3oce *+h1,.css-19z3oce *+h2,.css-19z3oce *+h3{margin-top:80px;}.css-19z3oce hr+h1,.css-19z3oce hr+h2,.css-19z3oce hr+h3{margin-top:0;}.css-19z3oce h1{font-size:30px;}.css-19z3oce h2{font-size:25px;}.css-19z3oce h3{font-size:20px;}.css-19z3oce blockquote{margin:30px 0;padding:5px 15px;border-left:2px solid #000000;font-weight:800;}.css-19z3oce ul{list-style-type:disc;}.css-19z3oce ol,.css-19z3oce ul{margin-left:20px;padding:10px 0;}.css-19z3oce hr{border:1px solid #000000;margin:100px 0;}.css-19z3oce a{color:#4263eb;-webkit-text-decoration:underline;text-decoration:underline;}.css-19z3oce pre[class*='language-']{margin:30px 0;padding:15px;font-size:15px;}.css-19z3oce pre[class*='language-']::-webkit-scrollbar-thumb{background:rgba(255, 255, 255, 0.5);border-radius:3px;}.css-19z3oce code[class*='language-'],.css-19z3oce pre[class*='language-']{tab-size:2;}@media (max-width: 768px){.css-19z3oce{width:100%;padding:80px 20px;line-height:1.6;font-size:14px;}.css-19z3oce h1{font-size:23px;}.css-19z3oce h2{font-size:20px;}.css-19z3oce h3{font-size:17px;}.css-19z3oce img{width:100%;}.css-19z3oce hr{margin:50px 0;}}</style><div class="css-19z3oce e1ijh0y10"><h1>JPA Cascade와 mappedBy의 혼동?(feat. orphanRemoval)</h1>
<h2 id="개요" style="position:relative;"><a href="#%EA%B0%9C%EC%9A%94" aria-label="개요 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>개요</h2>
<p>JPA를 공부하면서 Cascade와 MappedBy에서 혼동(뭔가 기능상 영역이 겹쳐진다는 느낌)을 느꼈고, 그 내용을 정리해 보려고 한다.</p>
<p>일단 JPA Cascade와 MappledBy가 무엇인지 공부하고, 대채 무엇이 혼동되었는지 알아볼 생각이다.</p>
<h2 id="jpa-cascade영속성전의란" style="position:relative;"><a href="#jpa-cascade%EC%98%81%EC%86%8D%EC%84%B1%EC%A0%84%EC%9D%98%EB%9E%80" aria-label="jpa cascade영속성전의란 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JPA Cascade(영속성전의)란</h2>
<h3 id="jpa-cascade의-정의" style="position:relative;"><a href="#jpa-cascade%EC%9D%98-%EC%A0%95%EC%9D%98" aria-label="jpa cascade의 정의 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JPA Cascade의 정의</h3>
<p>JPA Cascade는 영속성전의를 말한다. 부모엔티티와 자식엔티티가 연관관계가 설정된 상황에서 부모엔티티의 영속성 상태 변화가 발생할 경우 해당 부모엔티티에 연관관계로 연결된 자식엔티티에도 자동으로 영속성 상태변화를 전파시키는 것을 말한다.</p>
<p>Cascade는 엔티티 선언시 연관관계를 설정할 때 옵션으로 설정할수 있으며, 다음과 같은 다양한 옵션으로 설정이 가능하다.</p>
<p>예를 들어 게시글과 게시글의 댓글이 있는경우, 게시글이 사제될 때 해당 게시글의 삭제가 같이 삭제되는 기능을 적용하고 싶을때 유용하게 사용할수 있는 기능이다.</p>
<blockquote>
<p>쉽게 말해 부모엔티티가 퍼시스턴스 영속화가 될때 자식엔티티를 함께 set으로 설정해 놓으면, 자식 엔티티도 함께 자동으로 퍼시스턴스 영속화가 되고, 부모엔티티가 삭제되면 해당 부모엔티티의 자식 엔티티도 함께 삭제 가 되는 것이다.</p>
</blockquote>
<blockquote>
<p>RDB에서 FK 설정시 사용되는 cascade와 비슷하다고 보면 이해가 슆다.</p>
</blockquote>
<h3 id="jpa-cascade-옵션-종류" style="position:relative;"><a href="#jpa-cascade-%EC%98%B5%EC%85%98-%EC%A2%85%EB%A5%98" aria-label="jpa cascade 옵션 종류 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JPA Cascade 옵션 종류</h3>
<p>아래 6개 정도의 JPA Cascade 옵션종류가 존재하는데 ALL, PERSIST, REMOVE 정도만 사용된다고 한다.(인프런에서 김영환님은 주로 ALL, PERSIST 정도만 사용하신다고 한다.)</p>
<ul>
<li>
<p><strong>CascadeType.ALL : 모두 적용</strong></p>
<ul>
<li>부모엔티티의 모든 영속성상태 변화가 자식엔티티에 반영된다.</li>
</ul>
</li>
<li>
<p><strong>CascadeType.PERSIST: 영속</strong></p>
<ul>
<li>부모엔티티가 퍼시스턴스될때 자식엔티티도 함께 퍼시스턴트 상태가 된다.</li>
</ul>
</li>
<li>
<p><strong>CascadeType.REMOVE: 삭제</strong></p>
<ul>
<li>부모엔티티가 삭제될때 자식엔티티도 함쎄 삭제 된다.</li>
</ul>
</li>
<li>
<p>CascadeType.MERGE: 병합</p>
<ul>
<li>부모엔티티가 merge 작업이 수행될 때 자식엔티티도 함게 merge작업이 수행된다.</li>
</ul>
</li>
<li>
<p>CascadeType.REFRESH: REFRESH</p>
<ul>
<li>entityManager.refersh() 작업으로 부모엔티티가 새로고침 될 때 자식엔티티도 함께 새로고침이 된다.(리프래쉬는 DB에서 해당 엔티티를 재조회 하는 것을 의미한다.)</li>
</ul>
</li>
<li>
<p>CascadeType.DETACH: DETACH</p>
<ul>
<li>부모엔티티가 영속성 콘텍스트에서 detach되면 자식엔티티도 함께 detach된다.</li>
</ul>
</li>
</ul>
<h3 id="jpa-cascade-간단예제" style="position:relative;"><a href="#jpa-cascade-%EA%B0%84%EB%8B%A8%EC%98%88%EC%A0%9C" aria-label="jpa cascade 간단예제 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JPA Cascade 간단예제</h3>
<ul>
<li>Parent 엔티티
<ul>
<li>1:다 관계에서 CascaeType.All이 지정되어 있다.</li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>jpaexample<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@OneToMany</span><span class="token punctuation">(</span>mappedBy <span class="token operator">=</span> <span class="token string">"parent"</span><span class="token punctuation">,</span> cascade <span class="token operator">=</span> <span class="token class-name">CascadeType</span><span class="token punctuation">.</span><span class="token constant">ALL</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Children</span><span class="token punctuation">></span></span> childrenList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addChildren</span><span class="token punctuation">(</span><span class="token class-name">Children</span> children<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>childrenList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
        children<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre></div>
<ul>
<li>Children 엔티티</li>
</ul>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>jpaexample<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Children</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ManyToOne</span>
    <span class="token annotation punctuation">@JoinColumn</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"parent_id"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Parent</span> parent<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<ul>
<li>위처럼 Parent와 Chidren 엔티티가 1:다 연관관계일 경우 아래처럼 Parent에 Childen을 모두 담아 Parent 객체의 한번의 저장으로 연관된 Children 엔티티를 한꺼번에 저장할수 있다.</li>
</ul>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token class-name">Parent</span> parent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
parent<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"부모1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Children</span> children1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
children1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"자식1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Children</span> children2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
children2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"자식2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

parent<span class="token punctuation">.</span><span class="token function">addChildren</span><span class="token punctuation">(</span>children1<span class="token punctuation">)</span><span class="token punctuation">;</span>
parent<span class="token punctuation">.</span><span class="token function">addChildren</span><span class="token punctuation">(</span>children2<span class="token punctuation">)</span><span class="token punctuation">;</span>

entityManager<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2 id="jpa-cacade-사용시-유의점" style="position:relative;"><a href="#jpa-cacade-%EC%82%AC%EC%9A%A9%EC%8B%9C-%EC%9C%A0%EC%9D%98%EC%A0%90" aria-label="jpa cacade 사용시 유의점 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JPA Cacade 사용시 유의점</h2>
<p>Cascade 옵션은 신중하게 사용해야 한다.</p>
<p>무분별한 사용은 성능 저하나 데이터 무결성 문제를 야기할 수 있다.</p>
<p>의도치 않게 고아 데이터가 생성되거나, 반대로 삭제되면 안되는 데이터가 삭제되어 버리는 동작이 발생할수 있으므로 JPA Cascade 기능은 프로젝트내에서 사용규칙을 정하고 구현하는 비지니스에 주의하여 적용해야 한다.</p>
<blockquote>
<p>JPA Cascade의 사용시 주의해야 하는 경우의 예
A라는 부모, B라는 부모가 동시에 C라는 자식엔티티를 연관관계로 갖을 때, 만약 A라는 엔티티에서 Cascade.REMOVE가 설정되어 있고 A가 삭제가 되는 경우 B부모 엔티티에서는 연관관계가 깨지는 상황이 발생하게 된다.</p>
</blockquote>
<blockquote>
<p>TIP.
부모엔티티와 자식엔티티의 라이프라이클이 거의 동일하고,
자식엔티티가 한 부모엔티티에만 속한경우에 편의성을 위해 JPA Cascade를 고려해 보자.</p>
</blockquote>
<h3 id="고아객체" style="position:relative;"><a href="#%EA%B3%A0%EC%95%84%EA%B0%9D%EC%B2%B4" aria-label="고아객체 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>고아객체</h3>
<ul>
<li>고아객체란 부모엔티티와 연관관계가 끊어진 자식 엔티티를 말한다.</li>
<li>이런 고아객체를 자동으로 삭제하는 옵션 또한 존재한다.
<ul>
<li>orphanRemoval = true</li>
</ul>
</li>
</ul>
<p>아래는 orphanRemoval의 예이다. 다음과 같이 설정된 경우 부모엔티티와 연관관계가 끊어진 Children 엔티티는 DB에서 지워지게 된다.</p>
<p>orphanRemoval 설정은 @OneToMany, @OneToMany에 설정이 가능하며 보통 @OneToMany에 사용된다.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@OneToMany</span><span class="token punctuation">(</span>mappedBy <span class="token operator">=</span> <span class="token string">"parent"</span><span class="token punctuation">,</span> cascade <span class="token operator">=</span> <span class="token class-name">CascadeType</span><span class="token punctuation">.</span><span class="token constant">ALL</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Children</span><span class="token punctuation">></span></span> childrenList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addChildren</span><span class="token punctuation">(</span><span class="token class-name">Children</span> children<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>childrenList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
        children<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre></div>
<ul>
<li>orphanRemoval = true 와 CascadeType.REMOVE의 차이점
<ul>
<li>얼핏보멷 두개가 동일한 기능을 하는것 처럼 보일수도 있지만 약간 차이가 있다.</li>
<li>CascadeType.Remove
<ul>
<li>부모 엔티티가 삭제될 때, 연관된 자식 엔티티도 함께 삭제된다. 단순히 부모 엔티티가 삭제되었을 때, 관련된 자식 엔티티를 삭제하는 데 사용된다.]</li>
</ul>
</li>
<li>orphanRemoval = true
<ul>
<li>부모 엔티티와의 관계가 끊어진 자식 엔티티를 삭제한다. 부모 엔티티가 삭제되지 않더라도, 관계가 끊어진 자식 엔티티는 삭제된다. 관계가 끊어진 “고아” 엔티티를 자동으로 삭제하는 기능을 제공한다.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="cascadeall--orphanremoval-true-인-경우-부모엔티티는-자식엔티티의-모든-라이프사이클을-관리한다" style="position:relative;"><a href="#cascadeall--orphanremoval-true-%EC%9D%B8-%EA%B2%BD%EC%9A%B0-%EB%B6%80%EB%AA%A8%EC%97%94%ED%8B%B0%ED%8B%B0%EB%8A%94-%EC%9E%90%EC%8B%9D%EC%97%94%ED%8B%B0%ED%8B%B0%EC%9D%98-%EB%AA%A8%EB%93%A0-%EB%9D%BC%EC%9D%B4%ED%94%84%EC%82%AC%EC%9D%B4%ED%81%B4%EC%9D%84-%EA%B4%80%EB%A6%AC%ED%95%9C%EB%8B%A4" aria-label="cascadeall  orphanremoval true 인 경우 부모엔티티는 자식엔티티의 모든 라이프사이클을 관리한다 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cascade.ALL + orphanRemoval =true 인 경우 부모엔티티는 자식엔티티의 모든 라이프사이클을 관리한다.</h3>
<p>Cascade.ALL + orphanRemoval = true 가 된 경우 부모엔티티에서 자식엔티티의 라이프사이클을 전부 관리 할수 있다.</p>
<p>이 경우 자식엔티티는 별도의 DAO, Repository 등을 생성하지 않고 이런 기능들을 부모엔티티에 넘길수 있게 된다.</p>
<p>도메인 주도 설계(DDD)의 Aggreate Root 개념을 구현 할 수 있다.</p>
<h2 id="jpa-mappedby란" style="position:relative;"><a href="#jpa-mappedby%EB%9E%80" aria-label="jpa mappedby란 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JPA mappedBy란</h2>
<p>mappedBy는 JPA에서 양방향 연관관계를 설정할때, 연관관계의 주인이 누구인지 설정하는 것이다.
양방햐 연관관계에서만 사용되므로 @OneToMay, @ManyToMany 에서만 설정이 가능하다.
연관관계의 주인이라는 말은 DB에서 연관관계를 설정하기 위해서는 참조키가 필요한데, 이 참조키를 실제 같는 엔티티를 연관관계의 주인 엔티티라 부른다.
즉 mappedBy 설정이란 이런 양방향 연관관계에서 어떤 엔티티에 실제 연관관계를 위한 참조키를 저장할것인지를 설정하는 기능이다.</p>
<p>아래 Parent 엔티티에 mappledBy = “parent” 라는 설정의 의미는 나 Parent 엔티티는 양방향 연관관계의 주인이 아니다. 라는 의미이다.</p>
<p>나 말고 상대 엔티티인 Children 엔티티가 연관관계의 주인이며, 해당엔티티의 parent 라는 프로퍼티가 실제 DB에서 참조키를 저장하는 컬럼이다 라고 명시한 것이다.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@OneToMany</span><span class="token punctuation">(</span>mappedBy <span class="token operator">=</span> <span class="token string">"parent"</span><span class="token punctuation">,</span> cascade <span class="token operator">=</span> <span class="token class-name">CascadeType</span><span class="token punctuation">.</span><span class="token constant">ALL</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Children</span><span class="token punctuation">></span></span> childrenList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addChildren</span><span class="token punctuation">(</span><span class="token class-name">Children</span> children<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>childrenList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
        children<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token class-name">Data</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Children</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ManyToOne</span>
    <span class="token annotation punctuation">@JoinColumn</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"parent_id"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Parent</span> parent<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<blockquote>
<p>mappedBy 사용시 햇갈리는 부분이 연관관계의 주인이 아닌 엔티티에 mappedBy 설정이 들어간다.
mappedBy 옵션이 보인다면 해당 엔티티의 반대편 엔티티가 연관관계의 주인이며, 그 주인 엔티티에 실제 FK 가 저장된다.</p>
</blockquote>
<h3 id="연관관계주인의-권한--연관관계를-설정할수-있는-권한의-연관관계-주인이-갖는다" style="position:relative;"><a href="#%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84%EC%A3%BC%EC%9D%B8%EC%9D%98-%EA%B6%8C%ED%95%9C--%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84%EB%A5%BC-%EC%84%A4%EC%A0%95%ED%95%A0%EC%88%98-%EC%9E%88%EB%8A%94-%EA%B6%8C%ED%95%9C%EC%9D%98-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EC%A3%BC%EC%9D%B8%EC%9D%B4-%EA%B0%96%EB%8A%94%EB%8B%A4" aria-label="연관관계주인의 권한  연관관계를 설정할수 있는 권한의 연관관계 주인이 갖는다 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>연관관계주인의 권한 : 연관관계를 설정할수 있는 권한의 연관관계 주인이 갖는다.</h3>
<p>위 예제에서 연관관계의 주인은 Children이다. 즉 Children 엔티티에서 setParent 호출만이 실제 연관관계를 설정하게 된다.</p>
<p>아래 Parent 부모엔티티의 addChildren 메소드를 보면 children.setParent 를 호출하는 것을 볼 수 있다. 만약 children.setParen 호출하지 않게 되면, Parent, Children 엔티티는 DB에 저장되지만 연관관계 없이 저장되게 된다.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addChildren</span><span class="token punctuation">(</span><span class="token class-name">Children</span> children<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>childrenList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
        children<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="난-왜-cascade와-mappedby가-혼동되는가" style="position:relative;"><a href="#%EB%82%9C-%EC%99%9C-cascade%EC%99%80-mappedby%EA%B0%80-%ED%98%BC%EB%8F%99%EB%90%98%EB%8A%94%EA%B0%80" aria-label="난 왜 cascade와 mappedby가 혼동되는가 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>난 왜 Cascade와 mappedBy가 혼동되는가</h2>
<p>이글을 통해 다시 내용을 정리하면서 내가 왜, 무엇을 혼동하게 되었는지 알았다.</p>
<p>다음과 같이 Cascade설정은 없지만, @OneToMany(mappedBy = “parent”, orphanRemoval = true) 설정을 하고, parent에 removeChildren을 하게 되면 연관관계가 끊어 지면서 orphanRemoval = true 를 통해 자동으로 자식 엔티티인 Children 엔티티가 삭제 된다.
부모엔티티의 Cascade 설정 없이, 메소드호출로 자식엔티티를 삭제하는 동작을 Cascade와 비슷하다고 스스로 여긴것 같다.(대체 왜??? 대충 공부해서 그런듯 하다.)</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@OneToMany</span><span class="token punctuation">(</span>mappedBy <span class="token operator">=</span> <span class="token string">"parent"</span><span class="token punctuation">,</span> orphanRemoval <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Children</span><span class="token punctuation">></span></span> childrenList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addChildren</span><span class="token punctuation">(</span><span class="token class-name">Children</span> children<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>childrenList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
        children<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeChildren</span><span class="token punctuation">(</span><span class="token class-name">Children</span> children<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>childrenList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
        children<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="정리" style="position:relative;"><a href="#%EC%A0%95%EB%A6%AC" aria-label="정리 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>정리</h2>
<ul>
<li>Cascade와 mappedby 는 혼동될 것이 없다.</li>
<li>Cascade는 영속성라이프사이클에 관련된 어떤 이벤트가 발생시 그 이벤트를 자식 엔티티에 전파할것인지에 대한 설정이다.</li>
<li>mappedBy는 양방향 연관관계에서 연관관계의 주인을 명시하는 설정이다.</li>
<li>mappedBy와 orphanRemoval = true를 같이 사용하면, 부모엔티티에서 연관관계 도우미?메소드를 통해 쉽게 제거 할수 있다.</li>
<li>Cascade.ALL + orphanRemoval =true 같이 사용하면, 부모엔티티에서 자식엔티티의 라이프사이클을 완전히 컨트롤 할 수 있다.
<ul>
<li>자식엔티티의 DAO, repository를 만들지 않을 수도 있다.</li>
</ul>
</li>
</ul>
<h2 id="참고자료" style="position:relative;"><a href="#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C" aria-label="참고자료 permalink" class="anchor-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>참고자료</h2>
<ul>
<li>인프런 - 자바 ORM 표준 JPA 프로그래밍 -기본편 (김영환)</li>
<li>책 - 자바 ORM 표준 JPA 프로그래밍 (김영환)</li>
<li>chatGPT</li>
</ul></div><style data-emotion="css hx9xpc">@media (max-width: 768px){.css-hx9xpc{padding:0 20px;}}</style><div class="css-hx9xpc e1gqsjds0"></div><style data-emotion="css 9w9jmx">.css-9w9jmx{display:grid;place-items:center;margin-top:auto;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}@media (max-width: 768px){.css-9w9jmx{font-size:13px;}}</style><footer class="css-9w9jmx e1oae0v80">Thank You for Visiting My Blog, Have a Good Day 😆<!-- --><br/>© 2022 Developer Hanumoka, Powered By Gatsby.<!-- --></footer></main><nav class="order-first md:w-32"></nav><aside class="md:w-32"></aside></div></main><div style="position:fixed;right:30px;bottom:30px;z-index:200"><button><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="2rem" width="2rem" xmlns="http://www.w3.org/2000/svg"><path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></svg></button></div></div></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-E71NLXCW18"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-E71NLXCW18', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/post/jpa_cascade_vs_mappedby/";window.___webpackCompilationHash="17a9af214c88ccb8a53d";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c9fa82aa5b1f9c65f078.js"],"app":["/app-e88ae88ac0bc62d200ad.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-365312321971de7f8ebd.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-9cc9fe2a143368c48f56.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-82d07ccbe21706caa847.js"],"component---src-pages-search-tsx":["/component---src-pages-search-tsx-1117cd0bae2839d34498.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-dba35a493b44a5d683b2.js"]};/*]]>*/</script><script src="/polyfill-c9fa82aa5b1f9c65f078.js" nomodule=""></script><script src="/app-e88ae88ac0bc62d200ad.js" async=""></script><script src="/framework-c45ea1cbb39153ed5c73.js" async=""></script><script src="/webpack-runtime-17b738e3f25f3cc9aab2.js" async=""></script></body></html>