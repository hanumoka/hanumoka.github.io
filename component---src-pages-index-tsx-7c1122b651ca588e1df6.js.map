{"version":3,"file":"component---src-pages-index-tsx-7c1122b651ca588e1df6.js","mappings":"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","sources":["webpack://gatsby-starter-default/./src/components/Main/CategoryList.tsx","webpack://gatsby-starter-default/./src/components/Main/PostItem.tsx","webpack://gatsby-starter-default/./src/hooks/useInfiniteScroll.tsx","webpack://gatsby-starter-default/./src/components/Main/PostList.tsx","webpack://gatsby-starter-default/./src/pages/index.tsx"],"sourcesContent":["import React, { FunctionComponent, ReactNode } from 'react';\nimport styled from '@emotion/styled';\nimport { Link } from 'gatsby';\n\nexport type CategoryListProps = {\n  selectedCategory: string;\n  categoryList: {\n    [key: string]: number;\n  };\n};\n\ntype CategoryItemProps = {\n  active: boolean;\n};\n\ntype GatsbyLinkProps = {\n  children: ReactNode;\n  className?: string;\n  to: string;\n} & CategoryItemProps;\n\nconst CategoryListWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  width: 768px;\n  margin: 100px auto 0;\n\n  @media (max-width: 768px) {\n    width: 100%;\n    margin-top: 50px;\n    padding: 0 20px;\n  }\n`;\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst CategoryItem = styled(({ active, ...props }: GatsbyLinkProps) => <Link {...props} />)<CategoryItemProps>`\n  margin-right: 20px;\n  padding: 5px 0;\n  font-size: 18px;\n  font-weight: ${({ active }) => (active ? '800' : '400')};\n  cursor: pointer;\n\n  &:last-of-type {\n    margin-right: 0;\n  }\n\n  @media (max-width: 768px) {\n    font-size: 15px;\n  }\n`;\n\nconst CategoryList: FunctionComponent<CategoryListProps> = function ({ selectedCategory, categoryList }) {\n  return (\n    <CategoryListWrapper>\n      {Object.entries(categoryList).map(([name, count]) => (\n        <CategoryItem to={`/?category=${name}`} active={name === selectedCategory} key={name}>\n          #{name}({count})\n        </CategoryItem>\n      ))}\n    </CategoryListWrapper>\n  );\n};\n\nexport default CategoryList;\n","import React, { FunctionComponent } from 'react'\nimport styled from '@emotion/styled'\nimport { Link } from 'gatsby'\nimport { PostFrontmatterType } from 'types/PostItem.types'\nimport { GatsbyImage } from 'gatsby-plugin-image'\n\n\n\nconst PostItemWrapper = styled(Link)`\n  display: flex;\n  flex-direction: column;\n  border-radius: 10px;\n  box-shadow: 0 0 8px rgba(0, 0, 0, 0.15);\n  transition: 0.3s box-shadow;\n  cursor: pointer;\n\n  &:hover {\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\n  }\n`\n\nconst ThumbnailImage = styled(GatsbyImage)`\n  width: 100%;\n  height: 200px;\n  border-radius: 10px 10px 0 0;\n`\n\nconst PostItemContent = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  padding: 15px;\n`\n\nconst Title = styled.div`\n  display: -webkit-box;\n  overflow: hidden;\n  margin-bottom: 3px;\n  text-overflow: ellipsis;\n  white-space: normal;\n  overflow-wrap: break-word;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  font-size: 20px;\n  font-weight: 700;\n`\n\nconst Date = styled.div`\n  font-size: 14px;\n  font-weight: 400;\n  opacity: 0.7;\n`\n\nconst Category = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 10px;\n  margin: 10px -5px;\n`\n\nconst CategoryItem = styled.div`\n  margin: 2.5px 5px;\n  padding: 3px 5px;\n  border-radius: 3px;\n  background: black;\n  font-size: 14px;\n  font-weight: 700;\n  color: white;\n`\n\nconst Summary = styled.div`\n  display: -webkit-box;\n  overflow: hidden;\n  margin-top: auto;\n  text-overflow: ellipsis;\n  white-space: normal;\n  overflow-wrap: break-word;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  font-size: 16px;\n  opacity: 0.8;\n`\n\ntype PostItemProps = PostFrontmatterType & { link: string }\n\nconst PostItem: FunctionComponent<PostItemProps> = function ({\n  title,\n  date,\n  categories,\n  summary,\n  thumbnail: {\n    childImageSharp: { gatsbyImageData },\n  },\n  link,\n}) {\n  return (\n    <PostItemWrapper to={link}>\n      <ThumbnailImage image={gatsbyImageData} alt=\"Post Item Image\" />\n\n      <PostItemContent>\n        <Title>{title}</Title>\n        <Date>{date}</Date>\n        <Category>\n          {categories.map(item => (\n            <CategoryItem key={item}>{item}</CategoryItem>\n          ))}\n        </Category>\n        <Summary>{summary}</Summary>\n      </PostItemContent>\n    </PostItemWrapper>\n  )\n}\n  \n  export default PostItem","import { MutableRefObject, useState, useEffect, useRef, useMemo } from 'react'\nimport { PostListItemType } from 'types/PostItem.types'\n\nexport type useInfiniteScrollType = {\n  containerRef: MutableRefObject<HTMLDivElement | null>\n  postList: PostListItemType[]\n}\n\nconst NUMBER_OF_ITEMS_PER_PAGE = 10\n\nconst useInfiniteScroll = function (\n  selectedCategory: string,\n  posts: PostListItemType[],\n): useInfiniteScrollType {\n  const containerRef: MutableRefObject<HTMLDivElement | null> = useRef<HTMLDivElement>(\n    null,\n  )\n  const [count, setCount] = useState<number>(1)\n\n  const postListByCategory = useMemo<PostListItemType[]>(\n    () =>\n      posts.filter(({ node: { frontmatter: { categories } } }: PostListItemType) =>\n        selectedCategory !== 'All'\n          ? categories.includes(selectedCategory)\n          : true,\n      ),\n    [selectedCategory],\n  )\n\n  const observer = useRef<IntersectionObserver | null>(null);\n\n  useEffect(() => {\n    observer.current = new IntersectionObserver(\n      (entries, observer) => {\n        if (!entries[0].isIntersecting) return;\n\n        setCount(value => value + 1);\n        observer.disconnect();\n      },\n    )\n  }, []);\n\n  useEffect(() => setCount(1), [selectedCategory])\n\n  useEffect(() => {\n    if (\n      NUMBER_OF_ITEMS_PER_PAGE * count >= postListByCategory.length ||\n      containerRef.current === null ||\n      containerRef.current.children.length === 0\n    ){\n      return;\n    }\n\n    if(observer && observer.current){\n      observer.current.observe(\n        containerRef.current.children[containerRef.current.children.length - 1],\n      )\n    }\n\n  }, [count, selectedCategory, observer])\n\n  return {\n    containerRef,\n    postList: postListByCategory.slice(0, count * NUMBER_OF_ITEMS_PER_PAGE),\n  }\n}\n\nexport default useInfiniteScroll","import React, { FunctionComponent } from 'react';\nimport styled from '@emotion/styled';\nimport PostItem from 'components/Main/PostItem';\nimport { PostListItemType } from 'types/PostItem.types';\nimport useInfiniteScroll, { useInfiniteScrollType } from 'hooks/useInfiniteScroll';\n\nconst PostListWrapper = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 20px;\n  width: 876px;\n  margin: 0 auto;\n  padding: 50px 0 100px;\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n    width: 100%;\n    padding: 50px 20px;\n  }\n`;\n\ntype PostListProps = {\n  selectedCategory: string;\n  posts: PostListItemType[];\n};\n\nconst PostList: FunctionComponent<PostListProps> = function ({ selectedCategory, posts }) {\n  const { containerRef, postList }: useInfiniteScrollType = useInfiniteScroll(selectedCategory, posts);\n\n  return (\n    <PostListWrapper ref={containerRef}>\n      {postList.map(\n        ({\n          node: {\n            id,\n            fields: { slug },\n            frontmatter,\n          },\n        }: PostListItemType) => (\n          <PostItem {...frontmatter} link={slug} key={id} />\n        ),\n      )}\n    </PostListWrapper>\n  );\n};\n\nexport default PostList;\n","import React, { FunctionComponent, useMemo } from 'react';\nimport CategoryList, { CategoryListProps } from 'components/Main/CategoryList';\nimport PostList from 'components/Main/PostList';\n\nimport { graphql } from 'gatsby';\nimport { IGatsbyImageData } from 'gatsby-plugin-image';\nimport { PostListItemType } from 'types/PostItem.types';\nimport queryString, { ParsedQuery } from 'query-string';\nimport Template from 'components/Common/Template';\n\ntype IndexPageProps = {\n  location: {\n    search: string;\n  };\n  data: {\n    site: {\n      siteMetadata: {\n        title: string;\n        description: string;\n        siteUrl: string;\n      };\n    };\n    allMarkdownRemark: {\n      edges: PostListItemType[];\n    };\n    file: {\n      childImageSharp: {\n        gatsbyImageData: IGatsbyImageData;\n      };\n      publicURL: string;\n    };\n  };\n};\n\nconst IndexPage: FunctionComponent<IndexPageProps> = function ({\n  location: { search },\n  data: {\n    site: {\n      siteMetadata: { title, description, siteUrl },\n    },\n    allMarkdownRemark: { edges },\n    file: {\n      childImageSharp: { gatsbyImageData },\n      publicURL,\n    },\n  },\n}) {\n  const parsed: ParsedQuery<string> = queryString.parse(search);\n  const selectedCategory: string = typeof parsed.category !== 'string' || !parsed.category ? 'All' : parsed.category;\n\n  const categoryList = useMemo(\n    () =>\n      edges.reduce(\n        (\n          list: CategoryListProps['categoryList'],\n          {\n            node: {\n              frontmatter: { categories },\n            },\n          }: PostListItemType,\n        ) => {\n          categories.forEach((category) => {\n            if (list[category] === undefined) list[category] = 1;\n            else list[category]++;\n          });\n\n          list['All']++;\n\n          return list;\n        },\n        { All: 0 },\n      ),\n    [],\n  );\n\n  const [hasMounted, setHasMounted] = React.useState(false);\n\n  React.useEffect(() => {\n    setHasMounted(true);\n  }, []);\n\n  if (!hasMounted) {\n    return null;\n  } else {\n    return (\n      <div>\n        <Template\n          title={title}\n          description={description}\n          url={siteUrl}\n          image={publicURL}\n          profileImage={gatsbyImageData}\n        >\n          <CategoryList selectedCategory={selectedCategory} categoryList={categoryList} />\n          <PostList selectedCategory={selectedCategory} posts={edges} />\n        </Template>\n      </div>\n    );\n  }\n};\n\nexport default IndexPage;\n\nexport const getPostList = graphql`\n  query getPostList {\n    site {\n      siteMetadata {\n        title\n        description\n        siteUrl\n      }\n    }\n    allMarkdownRemark(sort: { order: DESC, fields: [frontmatter___date, frontmatter___title] }) {\n      edges {\n        node {\n          id\n          fields {\n            slug\n          }\n          frontmatter {\n            title\n            summary\n            date(formatString: \"YYYY.MM.DD.\")\n            categories\n            thumbnail {\n              childImageSharp {\n                gatsbyImageData(width: 768, height: 400)\n              }\n            }\n          }\n        }\n      }\n    }\n    file(name: { eq: \"profile-image\" }) {\n      childImageSharp {\n        gatsbyImageData(width: 120, height: 120)\n      }\n      publicURL\n    }\n  }\n`;\n"],"names":["CategoryListWrapper","CategoryItem","_styled","active","props","___EmotionJSX","Link","selectedCategory","categoryList","Object","entries","map","name","count","to","key","PostItemWrapper","process","ThumbnailImage","GatsbyImage","PostItemContent","Title","Date","Category","Summary","title","date","categories","summary","gatsbyImageData","thumbnail","childImageSharp","link","image","alt","item","posts","containerRef","useRef","useState","setCount","postListByCategory","useMemo","filter","node","frontmatter","includes","observer","useEffect","current","IntersectionObserver","isIntersecting","value","disconnect","length","children","observe","postList","slice","PostListWrapper","useInfiniteScroll","ref","id","slug","fields","PostItem","search","location","data","site","siteMetadata","description","siteUrl","edges","allMarkdownRemark","file","publicURL","parsed","queryString","category","reduce","list","forEach","undefined","All","React","hasMounted","setHasMounted","Template","url","profileImage","CategoryList","PostList"],"sourceRoot":""}