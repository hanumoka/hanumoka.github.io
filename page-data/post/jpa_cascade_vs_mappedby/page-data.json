{"componentChunkName":"component---src-templates-post-template-tsx","path":"/post/jpa_cascade_vs_mappedby/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>JPA Cascade와 mappedBy를 공부할 때 오는 헷갈림(feat. orphanRemoval bug)</h1>\n<h2 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h2>\n<p>JPA를 공부하면서 Cascade와 MappedBy에서 혼동(뭔가 기능상 영역이 겹쳐진다는 느낌)과 헷갈림, 모호함? 느꼈고, 그 내용을 정리해 보려고 한다.</p>\n<h2 id=\"jpa-cascade영속성전의란\" style=\"position:relative;\"><a href=\"#jpa-cascade%EC%98%81%EC%86%8D%EC%84%B1%EC%A0%84%EC%9D%98%EB%9E%80\" aria-label=\"jpa cascade영속성전의란 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JPA Cascade(영속성전의)란</h2>\n<h3 id=\"jpa-cascade의-정의\" style=\"position:relative;\"><a href=\"#jpa-cascade%EC%9D%98-%EC%A0%95%EC%9D%98\" aria-label=\"jpa cascade의 정의 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JPA Cascade의 정의</h3>\n<p>JPA Cascade는 영속성전의를 말한다. 부모엔티티와 자식엔티티가 연관관계가 설정된 상황에서 부모엔티티의 영속성 상태 변화가 발생할 경우 해당 부모엔티티에 연관관계로 연결된 자식엔티티에도 자동으로 영속성 상태변화를 전파시키는 것을 말한다.</p>\n<p>Cascade는 엔티티 선언시 연관관계를 설정할 때 옵션으로 설정할수 있으며, 다음과 같은 다양한 옵션으로 설정이 가능하다.</p>\n<p>예를 들어 게시글과 게시글의 댓글이 있는경우, 게시글이 삭제될 때 해당 게시글의 댓글들이 같이 삭제되는 기능을 적용하고 싶을 때 유용하게 사용할 수 있는 기능이다.</p>\n<blockquote>\n<p>쉽게 말해 부모엔티티가 퍼시스턴스 영속화가 될 때 영속화가 되기 전의 자식엔티티를 부모엔티티에 연관관계로 설정하면, 부모엔티티 영속화 시점에 자식 엔티티도 함께 자동으로 퍼시스턴스 영속화가 되고, 부모엔티티가 삭제되면 해당 부모엔티티의 자식 엔티티도 함께 삭제 가 되는 것이다.</p>\n</blockquote>\n<blockquote>\n<p>RDB에서 FK 설정시 사용되는 cascade와 비슷하다고 보면 이해가 쉽다.</p>\n</blockquote>\n<h3 id=\"jpa-cascade-옵션-종류\" style=\"position:relative;\"><a href=\"#jpa-cascade-%EC%98%B5%EC%85%98-%EC%A2%85%EB%A5%98\" aria-label=\"jpa cascade 옵션 종류 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JPA Cascade 옵션 종류</h3>\n<p>아래 6개 정도의 JPA Cascade 옵션종류가 존재하는데 ALL, PERSIST, REMOVE 정도만 사용된다고 한다.(인프런 피셜)</p>\n<ul>\n<li>\n<p><strong>CascadeType.ALL : 모두 적용</strong></p>\n<ul>\n<li>부모엔티티의 모든 영속성 상태변화가 자식엔티티에 반영된다.</li>\n</ul>\n</li>\n<li>\n<p><strong>CascadeType.PERSIST: 영속</strong></p>\n<ul>\n<li>부모엔티티가 퍼시스턴스될 때 자식엔티티도 함께 퍼시스턴트 상태가 된다.</li>\n</ul>\n</li>\n<li>\n<p><strong>CascadeType.REMOVE: 삭제</strong></p>\n<ul>\n<li>부모엔티티가 삭제될 때 자식엔티티도 함께 삭제 된다.</li>\n</ul>\n</li>\n<li>\n<p>CascadeType.MERGE: 병합</p>\n<ul>\n<li>부모엔티티가 merge 작업이 수행될 때 자식엔티티도 함께 merge 작업이 수행된다.</li>\n</ul>\n</li>\n<li>\n<p>CascadeType.REFRESH: REFRESH</p>\n<ul>\n<li>entityManager.refersh() 작업으로 부모엔티티가 새로고침 될 때 자식엔티티도 함께 새로고침이 된다.(리프래쉬는 DB에서 해당 엔티티를 재 조회 하는 것을 의미한다.)</li>\n</ul>\n</li>\n<li>\n<p>CascadeType.DETACH: DETACH</p>\n<ul>\n<li>부모엔티티가 영속성 콘텍스트에서 detach되면 자식엔티티도 함께 detach된다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"jpa-cascade-간단예제\" style=\"position:relative;\"><a href=\"#jpa-cascade-%EA%B0%84%EB%8B%A8%EC%98%88%EC%A0%9C\" aria-label=\"jpa cascade 간단예제 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JPA Cascade 간단예제</h3>\n<ul>\n<li>Parent 엔티티\n<ul>\n<li>1:다 관계에서 CascadeType.All이 지정되어 있다.</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>jpaexample<span class=\"token punctuation\">.</span>entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">jakarta<span class=\"token punctuation\">.</span>persistence<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">lombok<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Data</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ArrayList</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Data</span>\n<span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Parent</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IDENTITY</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@OneToMany</span><span class=\"token punctuation\">(</span>mappedBy <span class=\"token operator\">=</span> <span class=\"token string\">\"parent\"</span><span class=\"token punctuation\">,</span> cascade <span class=\"token operator\">=</span> <span class=\"token class-name\">CascadeType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ALL</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Children</span><span class=\"token punctuation\">></span></span> childrenList <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addChildren</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Children</span> children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>childrenList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        children<span class=\"token punctuation\">.</span><span class=\"token function\">setParent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>Children 엔티티</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>jpaexample<span class=\"token punctuation\">.</span>entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">jakarta<span class=\"token punctuation\">.</span>persistence<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">lombok<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Data</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Data</span>\n<span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Children</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IDENTITY</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@ManyToOne</span>\n    <span class=\"token annotation punctuation\">@JoinColumn</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"parent_id\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Parent</span> parent<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>위처럼 Parent와 Chidren 엔티티가 1:다 연관관계일 경우 아래처럼 Parent에 Childen을 모두 담아 Parent 객체의 한번의 저장으로 연관된 Children 엔티티를 한꺼번에 저장할수 있다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Parent</span> parent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nparent<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"부모1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">Children</span> children1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchildren1<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"자식1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">Children</span> children2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchildren2<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"자식2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nparent<span class=\"token punctuation\">.</span><span class=\"token function\">addChildren</span><span class=\"token punctuation\">(</span>children1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nparent<span class=\"token punctuation\">.</span><span class=\"token function\">addChildren</span><span class=\"token punctuation\">(</span>children2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nentityManager<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"jpa-cacade-사용시-유의점\" style=\"position:relative;\"><a href=\"#jpa-cacade-%EC%82%AC%EC%9A%A9%EC%8B%9C-%EC%9C%A0%EC%9D%98%EC%A0%90\" aria-label=\"jpa cacade 사용시 유의점 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JPA Cacade 사용시 유의점</h2>\n<p>Cascade 옵션은 신중하게 사용해야 한다.</p>\n<p>무분별한 사용은 성능 저하나 데이터 무결성 문제를 야기할 수 있다.</p>\n<p>의도치 않게 고아 데이터가 생성되거나, 반대로 삭제되면 안되는 데이터가 삭제되어 버리는 동작이 발생할수 있으므로 JPA Cascade 기능은 프로젝트내에서 사용규칙을 정하고 구현하는 비지니스에 주의하여 적용해야 한다.</p>\n<blockquote>\n<p>JPA Cascade의 사용시 주의해야 하는 경우의 예:</p>\n<p>A라는 부모, B라는 부모가 동시에 C라는 자식엔티티를 연관관계로 갖을 때, 만약 A라는 엔티티에서 Cascade.REMOVE가 설정되어 있고 A가 삭제가 되는 경우 B부모 엔티티에서는 연관관계가 깨지는 상황이 발생하게 된다.</p>\n</blockquote>\n<blockquote>\n<p>TIP.\n부모엔티티와 자식엔티티의 라이프라이클이 거의 동일하고,\n자식엔티티가 한 부모엔티티에만 속한경우에 편의성을 위해 JPA Cascade를 고려해 보자.</p>\n</blockquote>\n<h3 id=\"고아객체\" style=\"position:relative;\"><a href=\"#%EA%B3%A0%EC%95%84%EA%B0%9D%EC%B2%B4\" aria-label=\"고아객체 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>고아객체</h3>\n<ul>\n<li>고아객체란 부모엔티티와 연관관계가 끊어진 자식 엔티티를 말한다.</li>\n<li>이런 고아객체를 자동으로 삭제하는 옵션 또한 존재한다.\n<ul>\n<li>orphanRemoval = true</li>\n</ul>\n</li>\n</ul>\n<p>아래는 orphanRemoval의 예이다. 다음과 같이 설정된 경우 부모엔티티와 연관관계가 끊어진 Children 엔티티는 DB에서 지워지게 된다.</p>\n<p>orphanRemoval 설정은 @OneToOne, @OneToMany 연관관계에서 설정이 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Data</span>\n<span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Parent</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IDENTITY</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@OneToMany</span><span class=\"token punctuation\">(</span>mappedBy <span class=\"token operator\">=</span> <span class=\"token string\">\"parent\"</span><span class=\"token punctuation\">,</span> cascade <span class=\"token operator\">=</span> <span class=\"token class-name\">CascadeType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ALL</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Children</span><span class=\"token punctuation\">></span></span> childrenList <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addChildren</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Children</span> children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>childrenList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        children<span class=\"token punctuation\">.</span><span class=\"token function\">setParent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>orphanRemoval = true 와 CascadeType.REMOVE의 차이점\n<ul>\n<li>얼핏보면 두개가 동일한 기능을 하는것 처럼 보일수도 있지만 약간 차이가 있다.</li>\n<li>CascadeType.Remove\n<ul>\n<li>부모 엔티티가 삭제될 때, 연관된 자식 엔티티도 함께 삭제된다. 단순히 부모 엔티티가 삭제되었을 때, 관련된 자식 엔티티를 삭제하는 데 사용된다.</li>\n</ul>\n</li>\n<li>orphanRemoval = true\n<ul>\n<li>부모 엔티티와의 관계가 끊어진 자식 엔티티를 삭제한다. 부모 엔티티가 삭제되지 않더라도, 관계가 끊어진 자식 엔티티는 삭제된다. 관계가 끊어진 “고아” 엔티티를 자동으로 삭제하는 기능을 제공한다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"cascadeall--orphanremoval-true-인-경우-부모엔티티는-자식엔티티의-모든-라이프사이클을-관리한다\" style=\"position:relative;\"><a href=\"#cascadeall--orphanremoval-true-%EC%9D%B8-%EA%B2%BD%EC%9A%B0-%EB%B6%80%EB%AA%A8%EC%97%94%ED%8B%B0%ED%8B%B0%EB%8A%94-%EC%9E%90%EC%8B%9D%EC%97%94%ED%8B%B0%ED%8B%B0%EC%9D%98-%EB%AA%A8%EB%93%A0-%EB%9D%BC%EC%9D%B4%ED%94%84%EC%82%AC%EC%9D%B4%ED%81%B4%EC%9D%84-%EA%B4%80%EB%A6%AC%ED%95%9C%EB%8B%A4\" aria-label=\"cascadeall  orphanremoval true 인 경우 부모엔티티는 자식엔티티의 모든 라이프사이클을 관리한다 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cascade.ALL + orphanRemoval =true 인 경우 부모엔티티는 자식엔티티의 모든 라이프사이클을 관리한다.</h3>\n<p>Cascade.ALL + orphanRemoval = true 가 된 경우 부모엔티티에서 자식엔티티의 라이프사이클을 전부 관리 할수 있다.</p>\n<p>이 경우 자식엔티티는 별도의 DAO, Repository 등을 생성하지 않고 이런 기능들을 부모엔티티에 넘길 수 있게 된다.</p>\n<p>도메인 주도 설계(DDD)의 Aggregate Root 개념을 구현 할 수 있다.</p>\n<h2 id=\"jpa-mappedby란\" style=\"position:relative;\"><a href=\"#jpa-mappedby%EB%9E%80\" aria-label=\"jpa mappedby란 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JPA mappedBy란</h2>\n<p>mappedBy는 JPA에서 양방향 연관관계를 설정할 때, 연관관계의 주인이 누구인지 설정하는 것이다.\n양방향 연관관계에서만 사용되므로 @OneToMay, @ManyToMany 에서만 설정이 가능하다.\n연관관계의 주인이라는 말은 DB에서 연관관계를 설정하기 위해서는 참조키가 필요한데, 이 참조키를 실제 소유하는 엔티티를 연관관계의 주인 엔티티라 부른다.\n즉 mappedBy 설정이란 이런 양방향 연관관계에서 어떤 엔티티에 실제 연관관계를 위한 참조키를 저장할 것인지를 설정하는 기능이다.</p>\n<p>아래 Parent 엔티티에 mappledBy = “parent” 라는 설정의 의미는 <strong>나 Parent 엔티티는 양방향 연관관계의 주인이 아니다.</strong> 라는 의미이다.</p>\n<p>나 말고 상대 엔티티인 Children 엔티티가 연관관계의 주인이며, 해당 엔티티의 parent 라는 프로퍼티가 실제 DB에서 참조키를 저장하는 컬럼이다 라고 명시한 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Data</span>\n<span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Parent</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IDENTITY</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@OneToMany</span><span class=\"token punctuation\">(</span>mappedBy <span class=\"token operator\">=</span> <span class=\"token string\">\"parent\"</span><span class=\"token punctuation\">,</span> cascade <span class=\"token operator\">=</span> <span class=\"token class-name\">CascadeType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ALL</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Children</span><span class=\"token punctuation\">></span></span> childrenList <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addChildren</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Children</span> children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>childrenList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        children<span class=\"token punctuation\">.</span><span class=\"token function\">setParent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n<span class=\"token class-name\">Data</span>\n<span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Children</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IDENTITY</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@ManyToOne</span>\n    <span class=\"token annotation punctuation\">@JoinColumn</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"parent_id\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Parent</span> parent<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>mappedBy 사용시 헷갈리는 부분은 연관관계의 주인이 아닌 엔티티에 mappedBy 설정이 들어간다는 것이다.\nmappedBy 옵션이 보인다면 해당 엔티티의 반대편 엔티티가 연관관계의 주인이며, 그 주인 엔티티에 실제 FK 가 저장된다.</p>\n</blockquote>\n<h3 id=\"연관관계-주인의-권한--연관관계를-설정할-수-있는-권한은-연관관계-주인이-갖는다\" style=\"position:relative;\"><a href=\"#%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EC%A3%BC%EC%9D%B8%EC%9D%98-%EA%B6%8C%ED%95%9C--%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84%EB%A5%BC-%EC%84%A4%EC%A0%95%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EA%B6%8C%ED%95%9C%EC%9D%80-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EC%A3%BC%EC%9D%B8%EC%9D%B4-%EA%B0%96%EB%8A%94%EB%8B%A4\" aria-label=\"연관관계 주인의 권한  연관관계를 설정할 수 있는 권한은 연관관계 주인이 갖는다 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>연관관계 주인의 권한 : 연관관계를 설정할 수 있는 권한은 연관관계 주인이 갖는다.</h3>\n<p>위 예제에서 연관관계의 주인은 Children이다. 즉 Children 엔티티에서 setParent 호출만이 실제 연관관계를 설정하게 된다.</p>\n<p>아래 Parent 부모엔티티의 addChildren 메소드를 보면 children.setParent를 호출하는 것을 볼 수 있다. 만약 children.setParent를 호출하지 않게 되면, Parent, Children 엔티티는 DB에 저장되지만 연관관계 없이 저장되게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addChildren</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Children</span> children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>childrenList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        children<span class=\"token punctuation\">.</span><span class=\"token function\">setParent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"난-왜-cascade와-mappedby가-혼동되는가\" style=\"position:relative;\"><a href=\"#%EB%82%9C-%EC%99%9C-cascade%EC%99%80-mappedby%EA%B0%80-%ED%98%BC%EB%8F%99%EB%90%98%EB%8A%94%EA%B0%80\" aria-label=\"난 왜 cascade와 mappedby가 혼동되는가 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>난 왜 Cascade와 mappedBy가 혼동되는가</h2>\n<p>혼동을 테스트할 예제를 준비하겠다.\n예제 코드에서는 cascade를 사용하지 않고, <strong>Parent 엔티티에 mappedBy, orphanRemoval = true 만 설정한 상태이다.</strong></p>\n<p>addChildren, removeChildren의 동작을 자세히 확인하길 바란다.</p>\n<ul>\n<li>엔티티</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token annotation punctuation\">@Data</span>\n<span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Parent</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IDENTITY</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@OneToMany</span><span class=\"token punctuation\">(</span>mappedBy <span class=\"token operator\">=</span> <span class=\"token string\">\"parent\"</span><span class=\"token punctuation\">,</span> orphanRemoval <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Children</span><span class=\"token punctuation\">></span></span> childrenList <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addChildren</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Children</span> children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>childrenList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        children<span class=\"token punctuation\">.</span><span class=\"token function\">setParent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">removeChildren</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Children</span> children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>childrenList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        children<span class=\"token punctuation\">.</span><span class=\"token function\">setParent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@Data</span>\n<span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Children</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">IDENTITY</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@ManyToOne</span>\n    <span class=\"token annotation punctuation\">@JoinColumn</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"parent_id\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Parent</span> parent<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<ul>\n<li>테스트 코드</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Parent</span> parent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nparent<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"부모1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">Children</span> children1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchildren1<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"자식1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n <span class=\"token class-name\">Children</span> children2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchildren2<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"자식2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nparent<span class=\"token punctuation\">.</span><span class=\"token function\">addChildren</span><span class=\"token punctuation\">(</span>children1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nparent<span class=\"token punctuation\">.</span><span class=\"token function\">addChildren</span><span class=\"token punctuation\">(</span>children2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nentityManager<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nentityManager<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>children1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nentityManager<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>children2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">Parent</span> parent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>실행결과는 다음과 같다.\nChidlren 엔티티가 연관관계의 주인이며, 연관관계 설정코드는 Parent 엔티티에서 children.setParent 를 호출하여 설정되었다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/98d0ab7e3fd1cdd262cf224e947f37ec/dface/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 123.4375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAABYlAAAWJQFJUiTwAAADg0lEQVR42q1VaXPaSBDV//8l2c3u1saYBMfBHLERh8wlceoCBEjcAkkoIMHb1mCyrq0Y/GGn6lX3zNBvWtOvB85zlxgPW5hNFEzMCF1Mxt2TJUwthSD/C/Nk51Od9mUWt15Z2BLP1luBC/Y7pB5uUKk+oVDMIJW+RTrzGV/v/8a3b58gSkVksgk8Pt2xvdjtb4jFPrD1ROIvJCm2Wq9DKItkm+DW3g5/JgU88BVkhCYKooKvj8/4ki0iyVeR+C4gni4gU5LQNmboDhfoGHN0R0uGznAObeJBn/pkt+BWXgC+rsMcGVgslvB9H5PJBLrew3g8Rr/XJ1+nvQXeM7j1NoA8shHsfDiuC8/z4JKN4P/wsdvt2CG2bTMcDgccj8c3wa3cPeKpEurVMmRFxWw+hyiKKBSKaDQakKQGypUKeD4PQRDYAdF4k3C9DTF1Dvi/BmcToWj4WHlEvAkxd0LMImyCF7zyndP+JXBBGMKwLBgTCwOyvREVgophWCaGVJzzXjQ/wboIjm4DepdHJvkRz/k4DO0JHSmF1P0f4LMxFB5vkbz7HbnsDUa9MnZOH1tbw3b9axBhCLXbRuW5SpCQTasoFZrULRKWM4UgYzHtMn+90ODYPTirt0GEAQa6AkXWUKu2kUlrkEQN9kLBdjOAu+7De4HLyHRm3wJ3PARYzXskBx+GoUFVGwgCH+7GpGDt5WT9J66RcjiGGA8kSLUcROpnTamhyCdhDhuUYf9qRr/McEl3NB6I6KtlzMwWdFnAYtL5mc1/cSlL7hDu4TsGAt9ESPjhDpm/347Y+hk7b8j2oru8+snWUEK3lYcmlyjTOgZaGZ0mj54iUMHKp3kjB7lVoMy7RHohw0iHcruEVPIGhdw9EQnsLtPJGEkoQWsPyH2/o/ktHjNxDPt1Vv0LhAG0rgqpLqMsqIh9GqGYl9EUZXyOG7j70sNzSSNt6pjRS32tUPTJ1KOWisXcgqK00Wm3mG+ZA6ztJT1jNtkVNpsNadMgcSuXi3IkwvlEZwGDQQ+appK/xmq5wJ7+HsIwQBjs2TvorKfYXCOMimKOZDiOgyk9As1mk/kOkUZvX0QUkR6OILHPrmcIHKiSNVSEDMqlNHSlSveXJ/AUNMBm2X+Fd+jwSBlGIh71a0zQM7PJRB7NXZuCViecCN7RegfqlEiskXjPwj2LOerj1z8+9/Ul0n8Ayy872STNTMwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/98d0ab7e3fd1cdd262cf224e947f37ec/a59e9/1.webp 192w,\n/static/98d0ab7e3fd1cdd262cf224e947f37ec/0ca9f/1.webp 384w,\n/static/98d0ab7e3fd1cdd262cf224e947f37ec/411c4/1.webp 600w\"\n              sizes=\"(max-width: 600px) 100vw, 600px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/98d0ab7e3fd1cdd262cf224e947f37ec/3b721/1.png 192w,\n/static/98d0ab7e3fd1cdd262cf224e947f37ec/66595/1.png 384w,\n/static/98d0ab7e3fd1cdd262cf224e947f37ec/dface/1.png 600w\"\n            sizes=\"(max-width: 600px) 100vw, 600px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/98d0ab7e3fd1cdd262cf224e947f37ec/dface/1.png\"\n            alt=\"기초예제실행결과\"\n            title=\"기초예제실행결과\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"혼동--cascasderemove-설정없이-mappedby와-orphanremoval--true-설정으로-비슷한-동작이-발생\" style=\"position:relative;\"><a href=\"#%ED%98%BC%EB%8F%99--cascasderemove-%EC%84%A4%EC%A0%95%EC%97%86%EC%9D%B4-mappedby%EC%99%80-orphanremoval--true-%EC%84%A4%EC%A0%95%EC%9C%BC%EB%A1%9C-%EB%B9%84%EC%8A%B7%ED%95%9C-%EB%8F%99%EC%9E%91%EC%9D%B4-%EB%B0%9C%EC%83%9D\" aria-label=\"혼동  cascasderemove 설정없이 mappedby와 orphanremoval  true 설정으로 비슷한 동작이 발생 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>혼동 : Cascasde.Remove 설정없이 mappedBy와 orphanRemoval = true 설정으로 비슷한 동작이 발생</h3>\n<p>테스트코드</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Parent</span> parent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nparent<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"부모1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">Children</span> children1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchildren1<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"자식1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">Children</span> children2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchildren2<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"자식2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nparent<span class=\"token punctuation\">.</span><span class=\"token function\">addChildren</span><span class=\"token punctuation\">(</span>children1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nparent<span class=\"token punctuation\">.</span><span class=\"token function\">addChildren</span><span class=\"token punctuation\">(</span>children2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nentityManager<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nentityManager<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>children1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nentityManager<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>children2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nentityManager<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>        <span class=\"token comment\">// Parent 객체를 삭제해보자.</span>\n</code></pre></div>\n<p>테스트코드의 결과</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 618px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/70689a11e74c37632e6037eb87959b1b/bbf35/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 137.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAABYlAAAWJQFJUiTwAAADOElEQVR42q1V2XLaQBDU/39HHvLiSuxKYnzIHOa+ZS4hCZAMRgghhCQOY0Cd0domVGLALkdVXTNL7fZOz8wO3NQb4aFbw8hQYPQlGHoT+kODweg3MRwoL1bCUJcw6Iu0R4I1bGNAe8amioBjMbeZ5WYzDxdX3yFUcojFeURiIVzxPxC6PMVN5Bzluyz48E8kUjxCV6f4dvqV1r9QKKVx8u0LcoU0UjkBQk1CPF0AN7RnOOFziGQEJMpNpAQJF7d5hpu0gPNoFr8iGUSyFbQHDuS+jZY+IThQyG8PXKjmAh1jDnW4IEJnCaF5D9vU4bkO1qslLHMIY9DH2DJJepfk6nAnNt7zcaa7REMdkn4HE8eB53kwRyOMxzacl7VlWTAM2jOdwqdDm42Pje//sTvgBvYC14kSJLGObrcH0zRRq9VQLpchyzJEUYQgCCgUCtB1nUXh+/7+CK3pGtYc7/4OkTHCkbdC316yRSDBZ1I2b+KV7HCERKhPnrYbj+FDhJt3EB4DIxzsRAh8DtQ2K/TGz4SrNbDe7Ael+Cg4b/4EsTdB15pRp3to0WtQhy7uR1NopgeN7KsfvJDgdSj6fnDwV1CVLEp5HmL1Fj01j0blFtnUJYRiBMUcT/4FKuUYLEOCZ3fgjtt7wZFQNKp5JG95pJMJ3JXqKBcyRBpHW8pDbpBfTdClRThWCzOHpstkPyjCRyhNBXKzhWK+jdC5huqdhOVMw+P0gdAjP7BddiCI8Nm+DSZZqieRS4WQjJ1RhNcklUcufUUDQ95KDOwfss7+CDfrJSYjheS0t3DHHfbbLtEuDpFy69Uj5q7GZC28QJZG63smd+H1yO8yG0j/W/aeHK4o+RkUspdUiCgetDzqdzHkMyEqRhjNWowqHEY68ZNSEWWRH4wQoD6sFulAlKqcpjahcVWkv4NIHGGa5HGa2JlUCsl4jIqXYSk5TBhUWZRpHkpEJuMy1EG9KqIiyIiGNbqkA6HUQa1C+Zy0WEqOSpYbSZJ4Qb14hprAo1lPMMnuuEE5VIhAJl9mRXqNbn9R1o8vG7WX29WtfcXugUPRbQmfb1TfaI+PtcwOYfufCN5LcJTws/jvhL8B0h0u70WFxGkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/70689a11e74c37632e6037eb87959b1b/a59e9/3.webp 192w,\n/static/70689a11e74c37632e6037eb87959b1b/0ca9f/3.webp 384w,\n/static/70689a11e74c37632e6037eb87959b1b/e571f/3.webp 618w\"\n              sizes=\"(max-width: 618px) 100vw, 618px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/70689a11e74c37632e6037eb87959b1b/3b721/3.png 192w,\n/static/70689a11e74c37632e6037eb87959b1b/66595/3.png 384w,\n/static/70689a11e74c37632e6037eb87959b1b/bbf35/3.png 618w\"\n            sizes=\"(max-width: 618px) 100vw, 618px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/70689a11e74c37632e6037eb87959b1b/bbf35/3.png\"\n            alt=\"Cascade설정이 없는데도 삭제되는 Children 엔티티\"\n            title=\"Cascade설정이 없는데도 삭제되는 Children 엔티티\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Parent 엔티티에 Cascade 설정이 없지만, Parent 엔티티가 삭제되면서 고아객체가 되버린 Children 엔티티가 orphanRemoval = true에 의하여 삭제 되었다.</p>\n<p>JPA설명을 보면 Cascade.remove없이 mappedBy와 orphanRemoval = true 설정을 한 상태에서 부모엔티티가 삭제된 경우 자식엔티티가 삭제되는 동일한 동작을 보여주게 된다.</p>\n<h3 id=\"orphanremoval--true-의-버그라고-생각되는-동작-연관관계가-끊어졌지만-제거되지-않는-자식엔티티\" style=\"position:relative;\"><a href=\"#orphanremoval--true-%EC%9D%98-%EB%B2%84%EA%B7%B8%EB%9D%BC%EA%B3%A0-%EC%83%9D%EA%B0%81%EB%90%98%EB%8A%94-%EB%8F%99%EC%9E%91-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84%EA%B0%80-%EB%81%8A%EC%96%B4%EC%A1%8C%EC%A7%80%EB%A7%8C-%EC%A0%9C%EA%B1%B0%EB%90%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EC%9E%90%EC%8B%9D%EC%97%94%ED%8B%B0%ED%8B%B0\" aria-label=\"orphanremoval  true 의 버그라고 생각되는 동작 연관관계가 끊어졌지만 제거되지 않는 자식엔티티 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>orphanRemoval = true 의 버그라고 생각되는 동작. 연관관계가 끊어졌지만 제거되지 않는 자식엔티티</h3>\n<p>테스트 코드</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">//Casecade 예제</span>\n<span class=\"token class-name\">Parent</span> parent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nparent<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"부모1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">Children</span> children1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchildren1<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"자식1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">Children</span> children2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchildren2<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"자식2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nparent<span class=\"token punctuation\">.</span><span class=\"token function\">addChildren</span><span class=\"token punctuation\">(</span>children1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nparent<span class=\"token punctuation\">.</span><span class=\"token function\">addChildren</span><span class=\"token punctuation\">(</span>children2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nentityManager<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nentityManager<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>children1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nentityManager<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>children2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nparent<span class=\"token punctuation\">.</span><span class=\"token function\">removeChildren</span><span class=\"token punctuation\">(</span>children1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Parent객체에서 Children 객체를 제거하는 코드</span>\nparent<span class=\"token punctuation\">.</span><span class=\"token function\">removeChildren</span><span class=\"token punctuation\">(</span>children2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Parent객체에서 Children 객체를 제거하는 코드</span></code></pre></div>\n<p>테스트코드의 결과</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 618px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f57813c4473c17e7da75afc3332e3c7e/bbf35/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 137.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAABYlAAAWJQFJUiTwAAADq0lEQVR42qVVa3OiSBT1//+O/bAfdjaT2mwmLzNuEuM7goooD0VFQBEQ8EUEz146G2dqK2q2lqrD7aa6D+d2n9udWYQzjEcCZhMFE0PCxOzCHIsME6OLqaWwaFsSpqYEy+jQGAnOtAeLxri2hpRjvfJYzCyXIa5vv4JvVvDwlEXu4Qq32Qtc3ZzjPvcNXKOM7Pc/8fR8R+POcXb+K/UvUasX8eXsF1RqRRQqPHhBwlOxhszUW+JLtoJciUee66LAS7h+rDLcF3lc/lXGN0KpqUC1fCiGB9WcE97aPSuAZq/Rn6ygTddE6Efgu0N4tokw8BFvIzj2FBPLgOvYMMYjStvEa7TGZ56MHUQQtSnl72Pu+wjDEPZsBtf14LP+Ao7jwDQt9i19kmSHZLf7EX9CxvLWuMvXIXXaGI102LYNQRDAcRxkWUan00Gj0UCtVoOqqoxwRxMPKnQWMZwVPv0cI2OEs3ALw4v2qexYKsmHeCc7rpAIzfnrfuAp/CfC5BOEp8AIrZ8U0vt/gWyzhe6+EW5jIE4Og5b4JDLh6hUdfY6RsySnh6watGmA4WyBgR1iQPG9nVZIWh2KeRgZ7LbQlDLq1Sw6rUfogxpEiuXCDfiXHF4qWWpfo8k9wJlICL0+Ard3EBlKlAgqeH68Q/E5TyQtcFTwYusJPakKWSxRO08/fYHvqFj6dLrMD4MUbqB0VaqUHl6qGm5vDLQaCjYLDdFiTFFHtEzjiE1IFb7Fj5FJ4g2dbRo2mxW63RYGAxnb7ZrkD2hAb59iGn+Q9Q8r3CURxkMBcpeHKFTRFetot6qYz9STkz8kTOIIlt6C1C5AEgvQNQ7Neo4IlT3hv3HsR5l4u8E6GGK7NgkGW68ksrAOR1jR93e890+mnCq0TbpDdIHuiDamhghj2MR40CDlAutP6LuuNSgKbD2PKqQaQLv5iO93vzO/9ZUq8+T97RlKz1eolm5QeLpE9uY35k3Plpl1jhBu0KELpsmLKORVXPyhg6+LKBdVXF6MyEYKtWWylATflWjS4NQubyhdBdOJRaezgI4oY2ZP0O9LUJUePHdOV4BL94sLL915tjFHFDIf2gMsFgsiUaHrtAHrJYbDAQxDZydIksR0EiWk8M2bR23DfDiSEAQBmbqPdrvNCFVVZndIHMeIog3hFXPntC+p9F6pZmvgXh7R4PLkxSrV8gN6MoeFryPwhkQyZDFwU7K3lE/aRtd4OgCqzBqjPkd2af8zubcH66cTj6j8G/ROL0PKWNuNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f57813c4473c17e7da75afc3332e3c7e/a59e9/2.webp 192w,\n/static/f57813c4473c17e7da75afc3332e3c7e/0ca9f/2.webp 384w,\n/static/f57813c4473c17e7da75afc3332e3c7e/e571f/2.webp 618w\"\n              sizes=\"(max-width: 618px) 100vw, 618px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f57813c4473c17e7da75afc3332e3c7e/3b721/2.png 192w,\n/static/f57813c4473c17e7da75afc3332e3c7e/66595/2.png 384w,\n/static/f57813c4473c17e7da75afc3332e3c7e/bbf35/2.png 618w\"\n            sizes=\"(max-width: 618px) 100vw, 618px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f57813c4473c17e7da75afc3332e3c7e/bbf35/2.png\"\n            alt=\"내 에상과 달리 삭제 되지 않는 Children 엔티티\"\n            title=\"내 에상과 달리 삭제 되지 않는 Children 엔티티\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Parent 엔티티의 removeChildren 코드를 잠깐 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">removeChildren</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Children</span> children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>childrenList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  children<span class=\"token punctuation\">.</span><span class=\"token function\">setParent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Parent앤티티에서 chidlrenList에서 특정 Children 엔티티를 제거하고, 해당 Children의 엔티티의 setParent(null)을 호출함으로써 Parent와 Children가의 연관관계를 제거한다.</p>\n<p><strong>나는 이렇게 하면 Children객체는 고아객체기 되고, 이 고아객체는 Parent 앤티티에서 설정한 orphanRemovel = true 설정에 의하여 DB에서 제거될 줄 알았았다.</strong></p>\n<p>하지만 결과는 Children 객체의 FK 프로퍼티에 null이 셋팅될 뿐이다. (연관관계는 끊어졌다.)</p>\n<p>JPA스팩상 연관관계가 끊어진 고아객체는 orphanRemoval = true 에 의하여 제거 되어야 한다.\n해당내용을 구글링해보니 해당동작이 버그ㄴ같다는 언급이 많다.</p>\n<p><strong>orphanRemoval = true 는 가급적 사용하지 않는 편이 안전해보인다.</strong>\n인터넷에서는 부모엔티티에서 Cascade.ALL과 함께 사용시에는 동작한다고 했지만, 내 경우에는 정상동작하지 않았다.</p>\n<h2 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h2>\n<ul>\n<li>Cascade와 mappedby는 별개다.</li>\n<li>Cascade는 영속성 라이프사이클에 관련된 어떤 이벤트가 발생시 그 이벤트를 자식 엔티티에 전파 할 것인지에 대한 설정이다.</li>\n<li>mappedBy는 양방향 연관관계에서 연관관계의 주인을 명시하는 설정이다.</li>\n<li><strong>mappedBy와 orphanRemoval = true를 같이 사용하면, 부모엔티티가 삭제 시 Cascade.Remove와 동일한 동작을 한다. => 2개의 다른 설정으로 동일한 동작을 해서 이부분이 햇갈렸다.</strong></li>\n<li>Cascade.ALL + orphanRemoval = true 같이 사용하면, 부모엔티티에서 자식엔티티의 라이프사이클을 완전히 컨트롤 할 수 있다.\n<ul>\n<li>자식엔티티의 DAO, repository를 만들지 않을 수도 있다.</li>\n</ul>\n</li>\n<li><strong>orphanRemoval=true의 동작에 버그가 있는듯 하다.(2023.05.21) 주의하여 사용할 필요가 있다.</strong></li>\n</ul>\n<h2 id=\"참고자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\" aria-label=\"참고자료 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고자료</h2>\n<ul>\n<li>\n<p>인프런 - 자바 ORM 표준 JPA 프로그래밍 -기본편 (김영환)</p>\n</li>\n<li>\n<p>책 - 자바 ORM 표준 JPA 프로그래밍 (김영환)</p>\n</li>\n<li>\n<p>chatGPT</p>\n</li>\n<li>\n<p>JPA orphanRemoval 버그: <a href=\"https://github.com/jyami-kim/Jyami-Java-Lab/issues/1\" target=\"_blank\" rel=\"nofollow\">https://github.com/jyami-kim/Jyami-Java-Lab/issues/1</a></p>\n</li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#jpa-cascade%EC%99%80-mappedby%EB%A5%BC-%EA%B3%B5%EB%B6%80%ED%95%A0-%EB%95%8C-%EC%98%A4%EB%8A%94-%ED%97%B7%EA%B0%88%EB%A6%BCfeat-orphanremoval-bug\">JPA Cascade와 mappedBy를 공부할 때 오는 헷갈림(feat. orphanRemoval bug)</a></p>\n<ul>\n<li>\n<p><a href=\"#%EA%B0%9C%EC%9A%94\">개요</a></p>\n</li>\n<li>\n<p><a href=\"#jpa-cascade%EC%98%81%EC%86%8D%EC%84%B1%EC%A0%84%EC%9D%98%EB%9E%80\">JPA Cascade(영속성전의)란</a></p>\n<ul>\n<li><a href=\"#jpa-cascade%EC%9D%98-%EC%A0%95%EC%9D%98\">JPA Cascade의 정의</a></li>\n<li><a href=\"#jpa-cascade-%EC%98%B5%EC%85%98-%EC%A2%85%EB%A5%98\">JPA Cascade 옵션 종류</a></li>\n<li><a href=\"#jpa-cascade-%EA%B0%84%EB%8B%A8%EC%98%88%EC%A0%9C\">JPA Cascade 간단예제</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#jpa-cacade-%EC%82%AC%EC%9A%A9%EC%8B%9C-%EC%9C%A0%EC%9D%98%EC%A0%90\">JPA Cacade 사용시 유의점</a></p>\n<ul>\n<li><a href=\"#%EA%B3%A0%EC%95%84%EA%B0%9D%EC%B2%B4\">고아객체</a></li>\n<li><a href=\"#cascadeall--orphanremoval-true-%EC%9D%B8-%EA%B2%BD%EC%9A%B0-%EB%B6%80%EB%AA%A8%EC%97%94%ED%8B%B0%ED%8B%B0%EB%8A%94-%EC%9E%90%EC%8B%9D%EC%97%94%ED%8B%B0%ED%8B%B0%EC%9D%98-%EB%AA%A8%EB%93%A0-%EB%9D%BC%EC%9D%B4%ED%94%84%EC%82%AC%EC%9D%B4%ED%81%B4%EC%9D%84-%EA%B4%80%EB%A6%AC%ED%95%9C%EB%8B%A4\">Cascade.ALL + orphanRemoval =true 인 경우 부모엔티티는 자식엔티티의 모든 라이프사이클을 관리한다.</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#jpa-mappedby%EB%9E%80\">JPA mappedBy란</a></p>\n<ul>\n<li><a href=\"#%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EC%A3%BC%EC%9D%B8%EC%9D%98-%EA%B6%8C%ED%95%9C--%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84%EB%A5%BC-%EC%84%A4%EC%A0%95%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EA%B6%8C%ED%95%9C%EC%9D%80-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EC%A3%BC%EC%9D%B8%EC%9D%B4-%EA%B0%96%EB%8A%94%EB%8B%A4\">연관관계 주인의 권한 : 연관관계를 설정할 수 있는 권한은 연관관계 주인이 갖는다.</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%82%9C-%EC%99%9C-cascade%EC%99%80-mappedby%EA%B0%80-%ED%98%BC%EB%8F%99%EB%90%98%EB%8A%94%EA%B0%80\">난 왜 Cascade와 mappedBy가 혼동되는가</a></p>\n<ul>\n<li><a href=\"#%ED%98%BC%EB%8F%99--cascasderemove-%EC%84%A4%EC%A0%95%EC%97%86%EC%9D%B4-mappedby%EC%99%80-orphanremoval--true-%EC%84%A4%EC%A0%95%EC%9C%BC%EB%A1%9C-%EB%B9%84%EC%8A%B7%ED%95%9C-%EB%8F%99%EC%9E%91%EC%9D%B4-%EB%B0%9C%EC%83%9D\">혼동 : Cascasde.Remove 설정없이 mappedBy와 orphanRemoval = true 설정으로 비슷한 동작이 발생</a></li>\n<li><a href=\"#orphanremoval--true-%EC%9D%98-%EB%B2%84%EA%B7%B8%EB%9D%BC%EA%B3%A0-%EC%83%9D%EA%B0%81%EB%90%98%EB%8A%94-%EB%8F%99%EC%9E%91-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84%EA%B0%80-%EB%81%8A%EC%96%B4%EC%A1%8C%EC%A7%80%EB%A7%8C-%EC%A0%9C%EA%B1%B0%EB%90%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EC%9E%90%EC%8B%9D%EC%97%94%ED%8B%B0%ED%8B%B0\">orphanRemoval = true 의 버그라고 생각되는 동작. 연관관계가 끊어졌지만 제거되지 않는 자식엔티티</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%A0%95%EB%A6%AC\">정리</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\">참고자료</a></p>\n</li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"JPA Cascade와 mappedBy를 공부할 때 오는 헷갈림(feat. orphanRemoval bug)","summary":"JPA cascade, mappedBy, orphanRemoval을 알아보자","date":"2023.05.06.","categories":["JPA","cascade","mappedBy","orphanRemoval"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADNElEQVR42lVTaU9TURR8P0WjMe5+IEYTtxg1ahSNkSgKoqAouCFEcEuICiJqFBFcogilIJTSQo2taNhcqBVKXCEgApWtUEr3jc2M555aoh8m7777zp0358xcyePx4ufQd/RbemB32tA73IlecyesdgtGbcMwW/vR1tdC6xEMWfsYdscYPz+bmtA1+A095g54PT64XC5Ifu841MaHyG9IhUyfhYrmeyj/mIOipmuQ67Nh6HqNB40XaO8OHr9LR5nhNp5/eoo3HRrk1Cah1HATT2jf4/YGCd0uN6t436llJcNjAxgYNdHaiBefZRiw9OLXSBcp72B0m9thGv6B5p+1GKQ6i83M7w6nHW63G5Jg9VLbQqnfG4AYgZDv8/h5L/gt8A/Gucbj9hCBh0lEjdPlIDgFofPv4cB/zwAdFD8T30Nw8tOFCf8UJv2/MeGbJkzR+zSmAuCzkjjY3m/E/cY05DWcRW59CkPZkscEQkGQ2MVrBxmn/1EDzacCKFpyUd6cA1XrA9R8e4buofagwsvaKEQUzkJCxSqcrdqGAyWLESmbh7o2JSmZJhIHQp2ImcaXrUSUfAHXCcSULqXzs1H8IRuS7qucNpeww4X6DDKiiNeXdVFIVm/m6IiZihn5vH6OV1LlJiSpNhI2MZLVW3C0fCU5fgvSCeU6XH8dD+0XGbJexaH2ewWu1cSivk2F/cULuCUxJ+GiIB4c/YWLmgjqZDvSqncgtToc56p34rRyI1QUPylavghykppPMzxduQEllKvYZ2FoaFcjsWINj8DutKK1tRWWkVEMjfUhUbEacWVhOFK+HIcJ8YoVPAK54QakY4pVSH8RSTnU4RQR7iuej4L3V0hxMc+xsCmDHR+zWTm8QmFqVfhMq2IsKeqtSKCfCCOlSuN9Jnn09hLedWipZSVDzEgoFiaIOLAp3qApaVU7uWXRbqjlk8r1UDTnQhJ39rxmF/YUzcFx5VouOFi6DHtlc+mKFXDeZlxmU7oRVxqG6JKFbKaAqN9NKRHdSOO+SbpGdch8GYtMMuOqLgYZLw+xYpvDyjcilEOxFnsigw/fXsTd+mTk1J1BXmMqivSZ+GL6gD+Y6HjWT5D4PQAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/155d8d580e2cb84d24912d3c8b249738/9102b/main.png","srcSet":"/static/155d8d580e2cb84d24912d3c8b249738/20abc/main.png 94w,\n/static/155d8d580e2cb84d24912d3c8b249738/a4d09/main.png 188w,\n/static/155d8d580e2cb84d24912d3c8b249738/9102b/main.png 376w","sizes":"(min-width: 376px) 376px, 100vw"},"sources":[{"srcSet":"/static/155d8d580e2cb84d24912d3c8b249738/c4d8c/main.webp 94w,\n/static/155d8d580e2cb84d24912d3c8b249738/12296/main.webp 188w,\n/static/155d8d580e2cb84d24912d3c8b249738/186c3/main.webp 376w","type":"image/webp","sizes":"(min-width: 376px) 376px, 100vw"}]},"width":376,"height":270}},"publicURL":"/static/155d8d580e2cb84d24912d3c8b249738/main.png"}}}}]},"file":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEwUlEQVR42iWU+VdTVxSF8//WtookefOYkDAFApIwi1QsFmvrUF2tWEUExICCWOZBoECRIUbmQPL1BH+467313rn77rP32TdQNFyKmiNLnrpHXne4MDxZPnnTgVodbugUkjrFRo3ziEFBt6RW9qhSZ7nkHfmmeRTNCIGibCyYJueewbnjcBIzBEzALZ9jy2GxxmBPwGgQ0AabfLUpmw3yrnF58Lk8izXyX4CLZlQAdWHimZxJ4ZlrcRqTDbrLjqYzkkrxtLeXtToDhF2J5XnS4NQSMNO6rDt3bBarLTaFTKnDwHmptYTNea0wFGYXQjuv2YwkGhke/4fBOz2c1iuQsmSZkJYVk3fTFkCb04jJ4M0W/vzpLltygAA6nCVUAVU5K2lme2yEQwzef8Ly0g4v7/YxV60wHdWYdMO898NM6ArrinmpX7HK5k1HkoHRMQY9aflIBN3+1Wfvrs1+vKSly5qi8OL+AxbmV3nQ1c2zcBnLmslWSOe/sMVC2GAoqPD6epiVSotXt2/xcWaNgXQ7gZ0Kne3lFDvj1fIzxIZhc2zrDLeleNTezZwYULRdYR6VNp1vy4mDH2VVDrmjqgy/HGFqco6/mtIEjm2HvQ6TXK/Da0vh7x9CFBIO770gmTKFibJycnIIVuTbcmPMX1dYFnZ4ERZDGv19D5icXeRFLE4g77gciIsTwjSj2GSklf06jzElyKHrMnjlOlnLYlfV2QlZ5K0YmWthPpSrwjwio2LxxPX5vb2ZnYSYciQmDOsmc6rNSpnOqKawUW/wIaxw5nns6QbL5Qr9wSgZt4HBkMtc0GRfpMAomegzEQozVlPOmkxCYE80mQiqnIjlG2UmY5rKRp3FjBhQdEQ3x2NF2CzEOjhu/o1XkqhDT+ZV2BdKUsiYfRJC89XCukojkBNXR4XNgcTvP3EvY5Sz2a0x7gRlgw96RP5Z8r2SMaueibQMfU81gz8G2Rb2uBFGy8J8ShiMxRTRsNJhxNVYVV2OJJuvK8MU5+J8uGewpZbaElBXaq5e448rKtO2xZChMSAyrKqKMPXpd1UJgsZQVYhAKVJLcdHN8SW/Lm8l0297pPWnHv03oqxLnHCj7ArLoSthllSLL6rJgq6zJLI8F+DZ51X0denc6fIJFFI6qwmdqbAqG2XyRbPS8C4ZMrC+zeOgzsdyg5yYV3quWDb/St3Q9yqdV8up+9nn3qMqOkcraZyXpBy2aOQEdCAeYkoitSUGXMhVdKGKg2LUoeR7Qxw9EfPGvwvT1e3QMh2jU26e1labznwd9eMeiWmbtjMBLDRoHLWq5N5EmOm3mXpWxXC3z3CDxWSjw2TCY1buv0xDlFty2ySlpr0YI7UeI/k+Qjrn0/rVpy1bQcu+zOFZUuXgocbpO4PDmQiF01aya5XkJj0ONxLsbd3msSSgeSxGy2Et9R8raNuNkf7ikd6Lkt6N0JGr4Ma2TXxJTMn2hjgdNzgaF+DFOBcHbZxMy809LqLPJHk4mqTxF5/UrEfL1wr6ss30bCepXlGJLV2jbl2jPVdF02eHhk2HwGlG4vTO5HBSbutsE4WvrZxt1fF5ppabIzXUbwszYdC2X3HZVnpHWt305HuE1H6EpqwvrUpNNkprNsb/ZxydAgphY08AAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/cd37422f29d09835455749f78f9ac0db/a0287/profile-image.png","srcSet":"/static/cd37422f29d09835455749f78f9ac0db/6ecb6/profile-image.png 30w,\n/static/cd37422f29d09835455749f78f9ac0db/43a9d/profile-image.png 60w,\n/static/cd37422f29d09835455749f78f9ac0db/a0287/profile-image.png 120w,\n/static/cd37422f29d09835455749f78f9ac0db/f5f72/profile-image.png 240w","sizes":"(min-width: 120px) 120px, 100vw"},"sources":[{"srcSet":"/static/cd37422f29d09835455749f78f9ac0db/2b147/profile-image.webp 30w,\n/static/cd37422f29d09835455749f78f9ac0db/caa3b/profile-image.webp 60w,\n/static/cd37422f29d09835455749f78f9ac0db/b15f9/profile-image.webp 120w,\n/static/cd37422f29d09835455749f78f9ac0db/b5014/profile-image.webp 240w","type":"image/webp","sizes":"(min-width: 120px) 120px, 100vw"}]},"width":120,"height":120}},"publicURL":"/static/cd37422f29d09835455749f78f9ac0db/profile-image.png"}},"pageContext":{"slug":"/post/jpa_cascade_vs_mappedby/"}},"staticQueryHashes":[]}